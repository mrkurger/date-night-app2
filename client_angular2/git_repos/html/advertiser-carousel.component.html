<div class="carousel-container">
  <div *ngIf="title" class="carousel-header">
    <h2 class="carousel-title">{{ title }}</h2>
    <div class="carousel-controls">
      <button 
        class="carousel-control-btn" 
        [ngClass]="{'disabled': !canScrollLeft}" 
        (click)="handleScroll('left')" 
        [disabled]="!canScrollLeft">
        <i class="pi pi-chevron-left"></i>
      </button>
      <button 
        class="carousel-control-btn" 
        [ngClass]="{'disabled': !canScrollRight}" 
        (click)="handleScroll('right')" 
        [disabled]="!canScrollRight">
        <i class="pi pi-chevron-right"></i>
      </button>
    </div>
  </div>

  <div class="carousel-wrapper">
    <div #carouselRef class="carousel-track" (scroll)="onScroll()">
      <div *ngFor="let advertiser of advertisers" class="carousel-item" [ngClass]="{'premium': variant === 'premium'}">
        <div class="carousel-card" (click)="isPremium && toggleInfo(advertiser.id)">
          <!-- Card Image -->
          <img 
            [src]="advertiser.image || '/assets/images/placeholder.jpg'" 
            [alt]="advertiser.name" 
            class="carousel-card-image">

          <!-- Overlay gradient -->
          <div class="carousel-card-overlay"></div>

          <!-- Online indicator -->
          <div *ngIf="advertiser.isOnline" class="carousel-badge online-badge">
            Online
          </div>

          <!-- Distance -->
          <div *ngIf="advertiser.distance !== undefined" class="carousel-badge distance-badge">
            {{ advertiser.distance }} km
          </div>

          <!-- VIP/Premium badge -->
          <div *ngIf="advertiser.isVip || advertiser.isPremium" class="carousel-badge status-badge"
               [ngClass]="{'premium-badge': advertiser.isPremium, 'vip-badge': advertiser.isVip && !advertiser.isPremium}">
            {{ advertiser.isPremium ? 'Premium' : 'VIP' }}
          </div>

          <!-- Advertiser name -->
          <div class="carousel-card-info">
            <h3 class="carousel-card-title">
              {{ advertiser.name }}
              <span *ngIf="advertiser.age" class="carousel-card-age">{{ advertiser.age }}</span>
            </h3>
            <p *ngIf="advertiser.location" class="carousel-card-location">{{ advertiser.location }}</p>
          </div>

          <!-- Info panel that slides in (only for premium variant) -->
          <div *ngIf="isPremium && showInfo === advertiser.id" class="carousel-card-details" [@infoAnimation]>
            <div class="carousel-card-details-content">
              <h3 class="carousel-card-details-title">
                {{ advertiser.name }}
                <span *ngIf="advertiser.age" class="carousel-card-details-age">{{ advertiser.age }}</span>
              </h3>
              <p *ngIf="advertiser.location" class="carousel-card-details-location">{{ advertiser.location }}</p>
              <p class="carousel-card-details-description">
                Premium advertiser with exclusive content and services. Contact now for special offers.
              </p>
            </div>

            <button class="carousel-card-details-button" (click)="viewProfile($event, advertiser.id)">
              View Profile
            </button>
          </div>

          <!-- Link overlay (only for non-premium variant) -->
          <a *ngIf="!isPremium" [routerLink]="['/advertiser', advertiser.id]" class="carousel-card-link"
             [attr.aria-label]="'View ' + advertiser.name + '\'s profile'"></a>
        </div>
      </div>
    </div>
  </div>
</div>