<!-- Emerald FloatingActionButton Component -->
<!-- Documentation: https://docs-emerald.condorlabs.io/FloatingActionButton -->

<div
  class="emerald-fab-container"
  [ngClass]="{
    'emerald-fab-container--bottom-right': position === 'bottom-right',
    'emerald-fab-container--bottom-left': position === 'bottom-left',
    'emerald-fab-container--top-right': position === 'top-right',
    'emerald-fab-container--top-left': position === 'top-left',
    'emerald-fab-container--center': position === 'center',
  }"
>
  <!-- Main Floating Action Button -->
  <button
    class="emerald-fab"
    [ngClass]="{
      'emerald-fab--primary': color === 'primary',
      'emerald-fab--secondary': color === 'secondary',
      'emerald-fab--success': color === 'success',
      'emerald-fab--danger': color === 'danger',
      'emerald-fab--warning': color === 'warning',
      'emerald-fab--info': color === 'info',
      'emerald-fab--small': size === 'small',
      'emerald-fab--medium': size === 'medium',
      'emerald-fab--large': size === 'large',
      'emerald-fab--open': menuOpen,
    }"
    [disabled]="disabled"
    (click)="toggleMenu($event)"
    [attr.aria-label]="label"
  >
    <i class="fas {{ icon }}"></i>

    <!-- Tooltip -->
    <span *ngIf="showTooltip && tooltipText" class="emerald-fab__tooltip">
      {{ tooltipText }}
    </span>
  </button>

  <!-- Menu Items -->
  <div
    *ngIf="hasMenu"
    class="emerald-fab-menu"
    [ngClass]="{
      'emerald-fab-menu--bottom-right': position === 'bottom-right',
      'emerald-fab-menu--bottom-left': position === 'bottom-left',
      'emerald-fab-menu--top-right': position === 'top-right',
      'emerald-fab-menu--top-left': position === 'top-left',
      'emerald-fab-menu--center': position === 'center',
      'emerald-fab-menu--open': menuOpen,
    }"
  >
    <button
      *ngFor="let item of menuItems"
      class="emerald-fab-menu__item"
      [ngClass]="{
        'emerald-fab-menu__item--primary': color === 'primary',
        'emerald-fab-menu__item--secondary': color === 'secondary',
        'emerald-fab-menu__item--success': color === 'success',
        'emerald-fab-menu__item--danger': color === 'danger',
        'emerald-fab-menu__item--warning': color === 'warning',
        'emerald-fab-menu__item--info': color === 'info',
      }"
      (click)="onMenuItemClick(item, $event)"
      [attr.aria-label]="item.label"
    >
      <i class="fas {{ item.icon }}"></i>
      <span class="emerald-fab-menu__item-label">{{ item.label }}</span>
    </button>
  </div>

  <!-- Backdrop for closing menu when clicking outside -->
  <div *ngIf="menuOpen" class="emerald-fab-backdrop" (click)="closeMenu()"></div>
</div>
