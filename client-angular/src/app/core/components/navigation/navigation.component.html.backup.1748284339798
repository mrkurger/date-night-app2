<div class="app-layout">
  <!-- Sidebar -->
  <p-sidebar [(visible)]="sidebarVisible" [modal]="false" class="menu-sidebar">
    <p-panelMenu [model]="menuItems" (click)="onMenuItemClick($event)"></p-panelMenu>
  </p-sidebar>

  <!-- Header -->
  <p-toolbar styleClass="app-header">
    <ng-template pTemplate="left">
      <button
        pButton
        type="button"
        icon="pi pi-bars"
        (click)="toggleSidebar()"
        class="p-button-text sidebar-toggle"
      ></button>
      <span class="app-title">Date Night App</span>
      <!-- Assuming app-title is styled globally or in navigation.component.scss -->
      <app-breadcrumbs></app-breadcrumbs>
    </ng-template>

    <ng-template pTemplate="right">
      <div class="header-actions">
        <!-- Search -->
        <button
          pButton
          type="button"
          icon="pi pi-search"
          (click)="openSearch()"
          class="p-button-text search-button"
        ></button>

        <!-- Keyboard Shortcuts -->
        <button
          pButton
          type="button"
          icon="pi pi-keyboard"
          pTooltip="Keyboard Shortcuts"
          tooltipPosition="bottom"
          class="p-button-text"
          (click)="openKeyboardShortcuts()"
        ></button>

        <!-- Theme Toggle -->
        <app-theme-toggle></app-theme-toggle>

        <!-- User Menu -->
        <div class="user-menu-container">
          <button
            pButton
            type="button"
            class="p-button-text p-button-rounded user-avatar-button"
            (click)="userMenu.toggle($event)"
          >
            <p-avatar
              [image]="userAvatar"
              [label]="!userAvatar ? userName?.charAt(0) : undefined"
              shape="circle"
            ></p-avatar>
          </button>
          <p-menu #userMenu [model]="userMenuItems" [popup]="true"></p-menu>
        </div>
      </div>
    </ng-template>
  </p-toolbar>

  <!-- Main Content -->
  <div class="main-content">
    <ng-content></ng-content>
  </div>

  <!-- Footer -->
  <p-toolbar styleClass="app-footer">
    <ng-template pTemplate="center">
      <span>&copy; {{ currentYear }} Date Night App. All rights reserved.</span>
    </ng-template>
  </p-toolbar>
</div>

<!-- Nebular layout to be removed:
<nb-layout>
  <nb-sidebar [state]="sidebarState" [responsive]="true" class="menu-sidebar">
    <nb-menu [items]="items" (itemClick)="onMenuItemClick($event)"></nb-menu>
  </nb-sidebar>

  <nb-layout-header fixed>
    <div class="header-container">
      <p-button label="" ></p-button>

      <app-breadcrumbs></app-breadcrumbs>

      <div class="header-actions">
        <p-button label="" icon="pi pi-search"></p-button>

        <button
          nbButton
          ghost
          nbTooltip="Keyboard Shortcuts"
          nbTooltipPlacement="bottom"
          (click)="openKeyboardShortcuts()"
        >
          <i class="pi pi-options-2"></i> 
        </button>

        <app-theme-toggle></app-theme-toggle>

        <nb-actions size="medium">
          <nb-action>
            <nb-user
              [name]="userName"
              [picture]="userAvatar"
              [nbContextMenu]="userMenuData" 
              nbContextMenuTag="user-profile-menu"
              size="medium"
            >
            </nb-user>
          </nb-action>
        </nb-actions>
      </div>
    </div>
  </nb-layout-header>

  <nb-layout-column class="main-content">
    <ng-content></ng-content>
  </nb-layout-column>

  <nb-layout-footer fixed>
    <span>&copy; 2025 Date Night App. All rights reserved.</span>
  </nb-layout-footer>
</nb-layout>
-->
