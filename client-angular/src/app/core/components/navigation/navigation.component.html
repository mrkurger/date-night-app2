<nb-layout>
  <!-- Sidebar -->
  <nb-sidebar [state]="sidebarState" [responsive]="true" class="menu-sidebar">
    <nb-menu [items]="items" (itemClick)="onMenuItemClick($event)"></nb-menu>
  </nb-sidebar>

  <!-- Header -->
  <nb-layout-header fixed>
    <div class="header-container">
      <!-- Sidebar Toggle -->
      <button nbButton ghost (click)="toggleSidebar()" class="sidebar-toggle">
        <nb-icon
          [icon]="sidebarState === 'collapsed' ? 'menu-2-outline' : 'menu-arrow-outline'"
        ></nb-icon>
      </button>

      <!-- Breadcrumbs -->
      <app-breadcrumbs></app-breadcrumbs>

      <!-- Right Actions -->
      <div class="header-actions">
        <!-- Search -->
        <button nbButton ghost class="search-button" (click)="openSearch()">
          <nb-icon icon="search-outline"></nb-icon>
          <span class="search-shortcut">âŒ˜K</span>
        </button>

        <!-- Keyboard Shortcuts -->
        <button
          nbButton
          ghost
          class="shortcuts-button"
          (click)="showKeyboardShortcuts()"
          nbTooltip="Show keyboard shortcuts"
          nbTooltipPlacement="bottom"
        >
          <nb-icon icon="keyboard-outline"></nb-icon>
          <span class="shortcuts-shortcut">?</span>
        </button>

        <!-- Theme Toggle -->
        <app-theme-toggle></app-theme-toggle>

        <!-- User Menu -->
        <nb-user
          *ngIf="isLoggedIn"
          [nbContextMenu]="userItems"
          [name]="userProfile?.username || 'User'"
          [picture]="userProfile?.profileImage || 'assets/images/default-avatar.png'"
          nbContextMenuTag="user-menu"
          (nbContextMenuItemClick)="onUserMenuSelect($event)"
        >
        </nb-user>

        <!-- Auth Actions -->
        <ng-container *ngIf="!isLoggedIn">
          <button nbButton ghost routerLink="/auth/login">Log In</button>
          <button nbButton status="primary" routerLink="/auth/register">Sign Up</button>
        </ng-container>
      </div>
    </div>
  </nb-layout-header>

  <!-- Main Content -->
  <nb-layout-column class="main-content">
    <ng-content></ng-content>
  </nb-layout-column>

  <!-- Footer -->
  <nb-layout-footer fixed>
    <span>&copy; 2025 Date Night App. All rights reserved.</span>
  </nb-layout-footer>
</nb-layout>
