<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glossary: Favorites - Date Night App</title>
  <link rel="stylesheet" href="/docs/component-library/styles/style.css">
  <style>
    .glossary-entry {
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    .entry-meta {
      color: var(--text-light);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    .params-table {
      width: 100%;
      margin-bottom: 1rem;
    }
    .tooltip {
      position: relative;
      display: inline-block;
      border-bottom: 1px dotted var(--text-color);
    }
    .tooltip .tooltip-text {
      visibility: hidden;
      width: 300px;
      background-color: var(--background-alt);
      color: var(--text-color);
      text-align: left;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -150px;
      opacity: 0;
      transition: opacity 0.3s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      font-size: 0.9rem;
    }
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>Date Night App Documentation</h1>
      <nav>
        <ul>
          <li><a href="/_docs_index.html">Home</a></li>
          <li><a href="/_glossary.html">Glossary</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
  <main class="container">
    <div class="page-content">
      <aside class="sidebar">
        <h3>Favorites</h3>
        <ul>
          <li><a href="./CHANGELOG.html">Changelog</a></li>
          <li><a href="./AILESSONS.html">AI Lessons</a></li>
          <li><a href="./GLOSSARY.html">Glossary</a></li>
        </ul>
      </aside>
      
      <article class="content">
        <h1>Glossary: Favorites</h1>
        
        <p>This file contains a glossary of functions and methods defined in the Favorites component/module.</p>
        <p>This file is automatically generated. Do not edit it directly.</p>
        
        <div class="search-container">
          <input type="text" id="glossary-search" placeholder="Search glossary...">
        </div>
        
        <div class="glossary-entries">

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-list/favorites-list.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, schemas: [CUSTOM_ELEMENTS_SCHEMA], imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, NebularModule, // These components are imported but not used in the template // FavoriteButtonComponent, // LoadingSpinnerComponent, // AppSortComponent, // AppSortHeaderComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) <nb-icon icon="chevron-down-outline"></nb-icon> </button> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon [icon]="showAdvancedFilters ? 'chevron-up-outline' : 'chevron-down-outline'"> </nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field> <nb-icon nbPrefix icon="search-outline"></nb-icon> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> </nb-form-field> <nb-select fullWidth [(ngModel)]="filterOptions.sort" (selectedChange)="applyFilters()" placeholder="Sort by" > <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <label class="label">Filter by tag:</label> <nb-tag-list> <nb-tag ngFor="let tag of userTags" [text]="tag.tag + ' (' + tag.count + ')'" [selected]="selectedTagFilters.includes(tag.tag)" (click)="toggleTagFilter(tag.tag)" appearance="outline" status="basic" > </nb-tag> </nb-tag-list> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.priority" (selectedChange)="applyFilters()" placeholder="Priority" > <nb-option [value]="undefined">Any</nb-option> <nb-option value="high"> <nb-icon icon="arrow-up-outline" class="priority-icon high"></nb-icon> High </nb-option> <nb-option value="normal"> <nb-icon icon="minus-outline" class="priority-icon normal"></nb-icon> Normal </nb-option> <nb-option value="low"> <nb-icon icon="arrow-down-outline" class="priority-icon low"></nb-icon> Low </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.category" (selectedChange)="applyFilters()" placeholder="Category" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-select fullWidth [(ngModel)]="filterOptions.county" (selectedChange)="onCountyChange()" placeholder="County" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </div> <div class="filter-row" *ngIf="filterOptions.county"> <nb-select fullWidth [(ngModel)]="filterOptions.city" (selectedChange)="applyFilters()" placeholder="City" > <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateFrom" [(ngModel)]="filterOptions.dateFrom" (ngModelChange)="onDateChange()" placeholder="From date" /> <nb-datepicker #dateFrom></nb-datepicker> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="calendar-outline"></nb-icon> <input nbInput fullWidth [nbDatepicker]="dateTo" [(ngModel)]="filterOptions.dateTo" (ngModelChange)="onDateChange()" placeholder="To date" /> <nb-datepicker #dateTo></nb-datepicker> </nb-form-field> </div> <div class="filter-row"> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (ngModelChange)="applyFilters()" placeholder="Min price" /> </nb-form-field> <nb-form-field> <nb-icon nbPrefix icon="pricetags-outline"></nb-icon> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (ngModelChange)="applyFilters()" placeholder="Max price" /> </nb-form-field> </div> </div> <div class="active-filters" *ngIf="isFiltered"> <h4>Active Filters:</h4> <nb-tag-list> <nb-tag ngIf="filterOptions.search" (remove)="clearSearchFilter()" removable status="primary" > Search: {{ filterOptions.search }} </nb-tag> <nb-tag ngIf="filterOptions.priority" (remove)="clearPriorityFilter()" removable status="primary" > Priority: {{ filterOptions.priority | titlecase }} </nb-tag> <nb-tag ngIf="filterOptions.category" (remove)="clearCategoryFilter()" removable status="primary" > Category: {{ getCategoryLabel(filterOptions.category) }} </nb-tag> <nb-tag ngIf="filterOptions.county" (remove)="clearCountyFilter()" removable status="primary" > County: {{ filterOptions.county }} </nb-tag> <nb-tag ngIf="filterOptions.city" (remove)="clearCityFilter()" removable status="primary" > City: {{ filterOptions.city }} </nb-tag> <nb-tag ngIf="filterOptions.priceMin || filterOptions.priceMax" (remove)="clearPriceFilter()" removable status="primary" > Price: {{ getPriceRangeLabel() }} </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (remove)="clearDateFilter()" removable status="primary" > Date: {{ getDateRangeLabel() }} </nb-tag> <nb-tag ngFor="let tag of selectedTagFilters" (remove)="removeTagFilter(tag)" removable status="primary" > Tag: {{ tag }} </nb-tag> </nb-tag-list> <p-button></p-button> Clear all filters <nb-icon icon="close-outline"></nb-icon> </button> </div> </div> <div class="favorites-content"> <nb-card *ngIf="loading"> <nb-card-body> <nb-spinner size="large"></nb-spinner> </nb-card-body> </nb-card> <nb-alert *ngIf="error" status="danger"> Failed to load favorites. Please try again later. </nb-alert> <nb-alert *ngIf="!loading && (!favorites || favorites.length === 0)" status="info"> You haven't added any favorites yet. </nb-alert> <nb-list *ngIf="!loading && favorites && favorites.length > 0"> <nb-list-item *ngFor="let favorite of favorites"> <div class="favorite-item"> <nb-checkbox [(ngModel)]="favorite.selected" (ngModelChange)="updateSelectedFavorites()" ></nb-checkbox> <div class="favorite-content"> <div class="favorite-header"> <h3> <a [routerLink]="['/ads', getAdIdAsString(favorite.ad)]"> {{ favorite.ad && typeof favorite.ad !== 'string' ? favorite.ad.title : 'View Ad' }} </a> </h3> <div class="favorite-actions"> <p-button></p-button> <nb-icon icon="more-vertical-outline"></nb-icon> </button> </div> </div> <div class="favorite-meta"> <nb-tag [status]="getPriorityClass(favorite)" [icon]="getPriorityIcon(favorite.priority)" > {{ favorite.priority | titlecase }} Priority </nb-tag> <nb-tag status="basic" icon="calendar-outline"> Added {{ favorite.dateAdded || favorite.createdAt | date }} </nb-tag> <nb-tag ngIf="favorite.notificationsEnabled" status="success" icon="bell-outline" > Notifications On </nb-tag> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag ngFor="let tag of favorite.tags" status="basic" appearance="outline" size="tiny" > {{ tag }} </nb-tag> </nb-tag-list> </div> <p class="favorite-notes" *ngIf="favorite.notes"> {{ favorite.notes }} </p> </div> </div> </nb-list-item> </nb-list> </div> </div> `, styles: [ ` :host { display: block; padding: var(--padding); } .favorites-page { max-width: 1200px; margin: 0 auto; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); } .page-title { margin: 0; color: var(--text-basic-color); } .filters-container { background-color: var(--card-background-color); border-radius: var(--card-border-radius); padding: var(--card-padding); margin-bottom: var(--margin); box-shadow: var(--shadow); } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--margin); h3 { margin: 0; color: var(--text-basic-color); } } .basic-filters { display: grid; gap: var(--spacing); margin-bottom: var(--margin); } .advanced-filters { display: grid; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); } .filter-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing); } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: var(--spacing); padding-top: var(--padding); border-top: 1px solid var(--divider-color); h4 { margin: 0; color: var(--text-basic-color); } } .favorite-item { display: flex; gap: var(--spacing); width: 100%; } .favorite-content { flex: 1; } .favorite-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--margin); h3 { margin: 0; font-size: var(--text-heading-6-font-size); a { color: var(--text-basic-color); text-decoration: none; &:hover { color: var(--color-primary-hover); } } } } .favorite-meta { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--margin); } .favorite-tags { margin-bottom: var(--margin); } .favorite-notes { margin: 0; color: var(--text-hint-color); font-style: italic; } .priority-icon { &.high { color: var(--color-danger-default); } &.normal { color: var(--color-warning-default); } &.low { color: var(--color-success-default); } } nb-checkbox { margin-top: var(--spacing-xs); } nb-tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); } nb-spinner { margin: var(--margin) auto; } nb-alert { margin-bottom: var(--margin); } nb-list-item { padding: var(--card-padding); border-radius: var(--card-border-radius); background-color: var(--card-background-color); margin-bottom: var(--margin); box-shadow: var(--shadow); &:last-child { margin-bottom: 0; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { search: '', sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); batchActions = [ { title: 'Remove Selected', icon: 'trash-2-outline', data: 'remove', }, { title: 'Add Tags to Selected', icon: 'pricetags-outline', data: 'tags', }, { title: 'Set High Priority', icon: 'arrow-up-outline', data: 'priority-high', }, { title: 'Set Normal Priority', icon: 'minus-outline', data: 'priority-normal', }, { title: 'Set Low Priority', icon: 'arrow-down-outline', data: 'priority-low', }, ]; constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router, ) { this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Interface for saved filter presets / interface FilterPreset { name: string; filters: FavoriteFilterOptions; dateFrom: Date | null; dateTo: Date | null; selectedTagFilters: string[]; } /** Enhanced favorites page component with filtering, sorting, and batch operations / @Component({ selector: 'app-favorites-page', standalone: true, imports: [ CommonModule, FormsModule, ReactiveFormsModule, RouterModule, MatFormFieldModule, MatInputModule, MatSelectModule, MatButtonModule, MatIconModule, MatChipsModule, MatProgressSpinnerModule, MatTabsModule, MatCardModule, MatDividerModule, MatMenuModule, MatCheckboxModule, MatSlideToggleModule, MatTooltipModule, MatSnackBarModule, MatDialogModule, MatDatepickerModule, MatNativeDateModule, FavoriteButtonComponent, LoadingSpinnerComponent, ], template: ` <div class="favorites-page"> <div class="favorites-header"> <h1 class="page-title">My Favorites</h1> <div class="favorites-actions" *ngIf="favorites && favorites.length > 0"> <p-button></p-button> Batch Actions ({{ selectedFavorites.length }}) </button> <nb-menu #batchMenu="matMenu"> <button nb-menu-item (click)="removeFavoritesBatch()"> <nb-icon icon="delete"></nb-icon> <span>Remove Selected</span> </button> <button nb-menu-item (click)="openTagsDialog()"> <nb-icon icon="label"></nb-icon> <span>Add Tags to Selected</span> </button> <button nb-menu-item (click)="setPriorityBatch('high')"> <nb-icon icon="priority_high"></nb-icon> <span>Set High Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('normal')"> <nb-icon icon="remove_circle_outline"></nb-icon> <span>Set Normal Priority</span> </button> <button nb-menu-item (click)="setPriorityBatch('low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Set Low Priority</span> </button> </nb-menu> </div> </div> <div class="filters-container" *ngIf="favorites && favorites.length > 0"> <div class="filters-header"> <h3>Filters</h3> <p-button></p-button> {{ showAdvancedFilters ? 'Hide Advanced Filters' : 'Show Advanced Filters' }} <nb-icon icon="{{ showAdvancedFilters ? 'expand_less' : 'expand_more' }}"></nb-icon> </button> </div> <div class="basic-filters"> <nb-form-field appearance="outline" class="search-field"> <nb-form-field-label>Search favorites</nb-form-field-label> <input nbInput fullWidth [(ngModel)]="filterOptions.search" (input)="onSearchChange($event)" placeholder="Search by title, description, or notes" /> <nb-icon matSuffix>search"></nb-icon> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Sort by</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.sort" (selectionChange)="applyFilters()"> <nb-option value="newest">Newest first</nb-option> <nb-option value="oldest">Oldest first</nb-option> <nb-option value="price-asc">Price: Low to High</nb-option> <nb-option value="price-desc">Price: High to Low</nb-option> <nb-option value="title-asc">Title: A to Z</nb-option> <nb-option value="title-desc">Title: Z to A</nb-option> <nb-option value="priority-high">Priority: High to Low</nb-option> <nb-option value="priority-low">Priority: Low to High</nb-option> </nb-select> </nb-form-field> <div class="tags-filter" *ngIf="userTags && userTags.length > 0"> <div class="tags-label">Filter by tag:</div> <div class="tags-chips"> <nb-tag-list multiple [(ngModel)]="selectedTagFilters" (change)="applyFilters()"> <nb-tag-option *ngFor="let tag of userTags" [value]="tag.tag"> {{ tag.tag }} ({{ tag.count }}) </mat-chip-option> </nb-tag-list> </div> </div> </div> <div class="advanced-filters" *ngIf="showAdvancedFilters"> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>Priority</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.priority" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option value="high">High</nb-option> <nb-option value="normal">Normal</nb-option> <nb-option value="low">Low</nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>Category</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.category" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let category of categories" [value]="category.value"> {{ category.label }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <nb-form-field appearance="outline"> <nb-form-field-label>County</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.county" (selectionChange)="onCountyChange()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let county of counties" [value]="county"> {{ county }} </nb-option> </nb-select> </nb-form-field> <nb-form-field appearance="outline"> <nb-form-field-label>City</nb-form-field-label> <nb-select [(ngModel)]="filterOptions.city" (selectionChange)="applyFilters()"> <nb-option [value]="undefined">Any</nb-option> <nb-option *ngFor="let city of cities" [value]="city"> {{ city }} </nb-option> </nb-select> </nb-form-field> </div> <div class="filter-row"> <div class="price-range"> <span class="range-label">Price Range:</span> <div class="price-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>Min</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMin" (change)="applyFilters()" min="0" /> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>Max</nb-form-field-label> <input nbInput fullWidth type="number" [(ngModel)]="filterOptions.priceMax" (change)="applyFilters()" min="0" /> </nb-form-field> </div> </div> </div> <div class="filter-row"> <div class="date-range"> <span class="range-label">Date Added:</span> <div class="date-inputs"> <nb-form-field appearance="outline"> <nb-form-field-label>From</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="fromPicker" [(ngModel)]="dateFrom" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="fromPicker"></nb-datepicker-toggle> <nb-datepicker #fromPicker></nb-datepicker> </nb-form-field> <span class="range-separator">to</span> <nb-form-field appearance="outline"> <nb-form-field-label>To</nb-form-field-label> <input nbInput fullWidth [matDatepicker]="toPicker" [(ngModel)]="dateTo" (dateChange)="onDateChange()" /> <nb-datepicker-toggle matSuffix [for]="toPicker"></nb-datepicker-toggle> <nb-datepicker #toPicker></nb-datepicker> </nb-form-field> </div> </div> </div> <div class="filter-actions"> <p-button></p-button> <nb-icon icon="save"></nb-icon> Save Filter Preset </button> <p-button></p-button> 0"> <nb-icon icon="filter_list"></nb-icon> Load Preset </button> <nb-menu #presetMenu="matMenu"> <button nb-menu-item ngFor="let preset of filterPresets" (click)="loadFilterPreset(preset)" > {{ preset.name }} </button> </nb-menu> </div> </div> <div class="filter-summary" *ngIf="isFiltered"> <div class="active-filters"> <span class="filter-label">Active filters:</span> <nb-tag-set> <nb-tag *ngIf="filterOptions.search" (removed)="clearSearchFilter()"> Search: {{ filterOptions.search }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.priority" (removed)="clearPriorityFilter()"> Priority: {{ filterOptions.priority | titlecase }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.category" (removed)="clearCategoryFilter()"> Category: {{ getCategoryLabel(filterOptions.category) }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.county" (removed)="clearCountyFilter()"> County: {{ filterOptions.county }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngIf="filterOptions.city" (removed)="clearCityFilter()"> City: {{ filterOptions.city }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.priceMin !== undefined || filterOptions.priceMax !== undefined" (removed)="clearPriceFilter()" > Price: {{ getPriceRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag ngIf="filterOptions.dateFrom || filterOptions.dateTo" (removed)="clearDateFilter()" > Date: {{ getDateRangeLabel() }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> <nb-tag *ngFor="let tag of selectedTagFilters" (removed)="removeTagFilter(tag)"> Tag: {{ tag }} <button matChipRemove> <nb-icon icon="cancel"></nb-icon> </button> </nb-tag> </mat-chip-set> </div> <p-button></p-button> <nb-icon icon="clear"></nb-icon> Clear All Filters </button> </div> </div> <div class="loading-container" *ngIf="loading"> <app-loading-spinner></app-loading-spinner> <p>Loading your favorites...</p> </div> <div class="no-favorites" *ngIf="!loading && (!favorites || favorites.length === 0)"> <p-card> <nb-card-body> <nb-icon class="empty-icon">favorite_border"></nb-icon> <h3>No favorites yet</h3> <p>Browse ads and click the heart icon to add them to your favorites.</p> <p-button></p-button>Browse Ads</button> </nb-card-body> </nb-card> </div> <div class="favorites-list" *ngIf="!loading && favorites && favorites.length > 0"> <nb-card ngFor="let favorite of favorites" class="favorite-card" [ngClass]="getPriorityClass(favorite)" > <div class="favorite-header"> <div class="favorite-select"> <nb-checkbox [(ngModel)]="favorite.selected" (change)="updateSelectedFavorites()" color="primary" ></nb-checkbox> </div> <Image [src]=" favorite.ad.images && favorite.ad.images.length > 0 ? favorite.ad.images[0] : 'assets/images/placeholder.jpg' " [alt]="favorite.ad.title" class="favorite-image" [routerLink]="['/ads', favorite.ad._id]" /> <div class="favorite-info"> <h3 class="favorite-title" [routerLink]="['/ads', favorite.ad._id]"> {{ favorite.ad.title }} </h3> <div class="favorite-details"> <span class="favorite-location"> <nb-icon icon="location_on"></nb-icon> {{ favorite.ad.location }} </span> <span class="favorite-price" *ngIf="favorite.ad.price"> <nb-icon icon="attach_money"></nb-icon> {{ favorite.ad.price | currency: 'NOK' : 'symbol' : '1.0-0' }} </span> <span class="favorite-date"> <nb-icon icon="event"></nb-icon> Added {{ favorite.createdAt | date: 'mediumDate' }} </span> <span class="favorite-priority" [ngClass]="'priority-' + favorite.priority"> <nb-icon icon="{{ getPriorityIcon(favorite.priority) }}"></nb-icon> {{ favorite.priority | titlecase }} Priority </span> </div> <div class="favorite-tags" *ngIf="favorite.tags && favorite.tags.length > 0"> <nb-tag-list> <nb-tag *ngFor="let tag of favorite.tags">{{ tag }}</nb-tag> </nb-tag-list> </div> </div> <div class="favorite-actions"> <app-favorite-button [adId]="this.getAdIdAsString(favorite.ad._id)" (favoriteChanged)="onFavoriteRemoved($event, favorite)" ></app-favorite-button> <p-button></p-button> <nb-icon icon="more_vert"></nb-icon> </button> <nb-menu #menu="matMenu"> <button nb-menu-item [routerLink]="['/ads', favorite.ad._id]"> <nb-icon icon="visibility"></nb-icon> <span>View Ad</span> </button> <button nb-menu-item (click)="openNotesDialog(favorite)"> <nb-icon icon="note"></nb-icon> <span>Edit Notes</span> </button> <button nb-menu-item (click)="openTagsDialogForSingle(favorite)"> <nb-icon icon="label"></nb-icon> <span>Edit Tags</span> </button> <nb-divider></nb-divider> <button nb-menu-item [nbContextMenu]="priorityMenu"> <nb-icon icon="priority_high"></nb-icon> <span>Set Priority</span> </button> <button nb-menu-item (click)="toggleNotifications(favorite)"> <nb-icon icon="{{ favorite.notificationsEnabled ? 'notifications' : 'notifications_off' }}"></nb-icon> <span>{{ favorite.notificationsEnabled ? 'Disable Notifications' : 'Enable Notifications' }}</span> </button> <nb-divider></nb-divider> <button nb-menu-item (click)=" removeFavorite(this.getAdIdAsString(this.getAdIdAsString(favorite.ad._id))) " > <nb-icon icon="delete"></nb-icon> <span>Remove from Favorites</span> </button> </nb-menu> <nb-menu #priorityMenu="matMenu"> <button nb-menu-item (click)="updatePriority(favorite, 'high')"> <nb-icon icon="arrow_upward"></nb-icon> <span>High</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'normal')"> <nb-icon icon="remove"></nb-icon> <span>Normal</span> </button> <button nb-menu-item (click)="updatePriority(favorite, 'low')"> <nb-icon icon="arrow_downward"></nb-icon> <span>Low</span> </button> </nb-menu> </div> </div> <nb-divider *ngIf="favorite.notes"></nb-divider> <div class="favorite-notes" *ngIf="favorite.notes"> <nb-icon icon="note"></nb-icon> <p>{{ favorite.notes }}</p> </div> <nb-card-footer> <p-button></p-button> <nb-icon icon="visibility"></nb-icon> View Ad </button> <p-button></p-button> <nb-icon icon="chat"></nb-icon> Contact Advertiser </button> <nb-toggle [checked]="favorite.notificationsEnabled" (change)="toggleNotifications(favorite)" color="primary" class="notifications-toggle" > Notifications </nb-toggle> </nb-card-footer> </nb-card> </div> </div> `, styles: [ ` .favorites-page { max-width: 1200px; margin: 0 auto; padding: 20px; } .favorites-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .page-title { margin: 0; color: #333; font-size: 2rem; } .filters-container { margin-bottom: 24px; border: 1px solid #e0e0e0; border-radius: 8px; padding: 16px; background-color: #f9f9f9; } .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .filters-header h3 { margin: 0; font-size: 18px; color: #333; } .basic-filters { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: flex-start; } .advanced-filters { background-color: #f0f0f0; border-radius: 4px; padding: 16px; margin-bottom: 16px; } .filter-row { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; } .filter-row nb-form-field { flex: 1; min-width: 200px; } .price-range, .date-range { display: flex; flex-direction: column; width: 100%; } .range-label { font-weight: 500; color: #666; margin-bottom: 8px; } .price-inputs, .date-inputs { display: flex; align-items: center; gap: 8px; } .price-inputs nb-form-field, .date-inputs nb-form-field { flex: 1; } .range-separator { color: #666; margin: 0 8px; } .filter-actions { display: flex; gap: 16px; margin-top: 16px; } .filter-summary { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e0e0e0; } .active-filters { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .filter-label { font-weight: 500; color: #666; } .search-field { flex: 1; min-width: 250px; } .tags-filter { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; } .tags-label { font-weight: 500; color: #666; } .loading-container { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; } .loading-container p { margin-top: 20px; color: #666; } .no-favorites { text-align: center; padding: 40px 0; } .no-favorites nb-card { max-width: 500px; margin: 0 auto; padding: 30px; } .empty-icon { font-size: 64px; height: 64px; width: 64px; color: #ccc; margin-bottom: 20px; } .no-favorites h3 { margin-bottom: 10px; color: #333; } .no-favorites p { margin-bottom: 20px; color: #666; } .favorite-card { margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); } .favorite-card.priority-high { border-left: 4px solid #f44336; } .favorite-card.priority-normal { border-left: 4px solid #2196f3; } .favorite-card.priority-low { border-left: 4px solid #4caf50; } .favorite-header { display: flex; padding: 16px; } .favorite-select { display: flex; align-items: center; margin-right: 16px; } .favorite-image { width: 120px; height: 120px; object-fit: cover; border-radius: 4px; cursor: pointer; } .favorite-info { flex: 1; margin-left: 16px; display: flex; flex-direction: column; } .favorite-title { margin: 0 0 10px 0; font-size: 1.2rem; cursor: pointer; } .favorite-title:hover { color: #3f51b5; } .favorite-details { display: flex; flex-wrap: wrap; gap: 16px; color: #666; font-size: 0.9rem; margin-bottom: 8px; } .favorite-location, .favorite-price, .favorite-date, .favorite-priority { display: flex; align-items: center; } .favorite-priority.priority-high { color: #f44336; } .favorite-priority.priority-normal { color: #2196f3; } .favorite-priority.priority-low { color: #4caf50; } .favorite-details nb-icon { font-size: 16px; height: 16px; width: 16px; margin-right: 4px; } .favorite-tags { margin-top: 8px; } .favorite-actions { display: flex; align-items: flex-start; } .favorite-notes { display: flex; padding: 16px; background-color: #f9f9f9; border-radius: 0 0 8px 8px; } .favorite-notes nb-icon { margin-right: 8px; color: #666; } .favorite-notes p { margin: 0; color: #555; white-space: pre-line; } .notifications-toggle { margin-left: auto; } @media (max-width: 768px) { .favorite-header { flex-direction: column; } .favorite-image { width: 100%; height: 200px; margin-bottom: 16px; } .favorite-info { margin-left: 0; } .favorite-actions { margin-top: 16px; justify-content: flex-end; width: 100%; } } `, ], }) export class FavoritesPageComponent implements OnInit { favorites: (Favorite & { selected?: boolean })[] = []; loading = true; error = false; userTags: FavoriteTag[] = []; selectedFavorites: string[] = []; filterOptions: FavoriteFilterOptions = { sort: 'newest', }; selectedTagFilters: string[] = []; showAdvancedFilters = false; dateFrom: Date | null = null; dateTo: Date | null = null; counties: string[] = []; cities: string[] = []; filterPresets: FilterPreset[] = []; categories = [ { value: 'escort', label: 'Escort' }, { value: 'massage', label: 'Massage' }, { value: 'companion', label: 'Companion' }, { value: 'dancer', label: 'Dancer' }, { value: 'other', label: 'Other' }, ]; private searchSubject = new Subject<string>(); constructor( private favoriteService: FavoriteService, private dialogService: DialogService, private notificationService: NotificationService, private router: Router ) {} ngOnInit(): void { this.loadFavorites(); this.loadUserTags(); this.loadLocationData(); this.loadFilterPresets(); // Set up search debounce this.searchSubject .pipe(debounceTime(300), distinctUntilChanged()) .subscribe(() => this.applyFilters()); } /** Load user's favorites with optional filters</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadUserTags">
  <h3>loadUserTags</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's tags for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onSearchChange">
  <h3>onSearchChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle search input changes</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="applyFilters">
  <h3>applyFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply current filters and reload favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="resetFilters">
  <h3>resetFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Reset all filters to default values</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleAdvancedFilters">
  <h3>toggleAdvancedFilters</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle advanced filters visibility</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadLocationData">
  <h3>loadLocationData</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load location data for filtering</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCountyChange">
  <h3>onCountyChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle county selection change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onDateChange">
  <h3>onDateChange</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle date range change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="saveFilterPreset">
  <h3>saveFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Save current filter settings as a preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPresets">
  <h3>loadFilterPresets</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load saved filter presets</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFilterPreset">
  <h3>loadFilterPreset</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Apply a saved filter preset</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getCategoryLabel">
  <h3>getCategoryLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get the label for a category value</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriceRangeLabel">
  <h3>getPriceRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the price range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getDateRangeLabel">
  <h3>getDateRangeLabel</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get a formatted label for the date range</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearSearchFilter">
  <h3>clearSearchFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the search filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriorityFilter">
  <h3>clearPriorityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the priority filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCategoryFilter">
  <h3>clearCategoryFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the category filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCountyFilter">
  <h3>clearCountyFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the county filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearCityFilter">
  <h3>clearCityFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the city filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearPriceFilter">
  <h3>clearPriceFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the price filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="clearDateFilter">
  <h3>clearDateFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Clear the date filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeTagFilter">
  <h3>removeTagFilter</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a specific tag filter</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updateSelectedFavorites">
  <h3>updateSelectedFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Check if any filters are currently applied / get isFiltered(): boolean { return ( !!this.filterOptions.search || !!this.filterOptions.category || !!this.filterOptions.county || !!this.filterOptions.city || !!this.filterOptions.priority || this.filterOptions.priceMin !== undefined || this.filterOptions.priceMax !== undefined || !!this.filterOptions.dateFrom || !!this.filterOptions.dateTo || this.selectedTagFilters.length > 0 || this.filterOptions.sort !== 'newest' ); } /** Update the selected favorites array when checkboxes change</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavorite">
  <h3>removeFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="removeFavoritesBatch">
  <h3>removeFavoritesBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Remove multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openNotesDialog">
  <h3>openNotesDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit notes for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialogForSingle">
  <h3>openTagsDialogForSingle</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to edit tags for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="openTagsDialog">
  <h3>openTagsDialog</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Open dialog to add tags to multiple favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="updatePriority">
  <h3>updatePriority</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Update priority for a single favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="setPriorityBatch">
  <h3>setPriorityBatch</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Set priority for multiple favorites in a batch operation</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="toggleNotifications">
  <h3>toggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Toggle notifications for a favorite</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onFavoriteRemoved">
  <h3>onFavoriteRemoved</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle favorite removal from the favorite button component</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityClass">
  <h3>getPriorityClass</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get CSS class based on favorite priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getPriorityIcon">
  <h3>getPriorityIcon</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get icon name based on priority</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getAdIdAsString">
  <h3>getAdIdAsString</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites-page/favorites-page.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Convert ad ID to string regardless of its type</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="loadFavorites">
  <h3>loadFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Load user's favorites</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="getFavorites">
  <h3>getFavorites</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Get user's favorites from the API</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onCardClick">
  <h3>onCardClick</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle card click event</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onRemoveFavorite">
  <h3>onRemoveFavorite</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle remove favorite action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onToggleNotifications">
  <h3>onToggleNotifications</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle toggle notifications action</p>
  </div>
  
  
  
</div>

<div class="glossary-entry" id="onUpdateNotes">
  <h3>onUpdateNotes</h3>
  <p class="entry-meta">method | <a href="/client-angular/src/app/features/favorites/favorites.component.ts">Source</a></p>
  <div class="entry-description">
    <p>Handle update notes action</p>
  </div>
  
  
  
</div>
</div>
      </article>
    </div>
  </main>
  
  <footer>
    <div class="container">
      <p>&copy; 2025 Date Night App. All rights reserved.</p>
    </div>
  </footer>
  
  <script>
    // Search functionality
    document.getElementById('glossary-search').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const entries = document.querySelectorAll('.glossary-entry');
      
      entries.forEach(entry => {
        const name = entry.querySelector('h3').textContent.toLowerCase();
        const description = entry.querySelector('.entry-description').textContent.toLowerCase();
        
        if (name.includes(searchTerm) || description.includes(searchTerm)) {
          entry.style.display = '';
        } else {
          entry.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>