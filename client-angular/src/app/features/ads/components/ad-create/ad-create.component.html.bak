<div class="ad-create-container">
  <nb-card>
    <nb-card-header>
      <h2>Create New Advertisement</h2>
    </nb-card-header>
    <nb-card-body>
      <form [formGroup]="adForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <nb-form-field>
            <label for="title">Title</label>
            <input nbInput formControlName="title" placeholder="Enter title" />
            <div
              *ngIf="adForm.get('title')?.hasError('required') && adForm.get('title')?.touched"
              class="error-message"
            >
              Title is required
            </div>
          </nb-form-field>
        </div>

        <div class="form-group">
          <nb-form-field>
            <label for="description">Description</label>
            <textarea
              nbInput
              formControlName="description"
              placeholder="Enter description"
              rows="4"
            ></textarea>
            <div
              *ngIf="
                adForm.get('description')?.hasError('required') &&
                adForm.get('description')?.touched
              "
              class="error-message"
            >
              Description is required
            </div>
          </nb-form-field>
        </div>

        <div class="form-group">
          <nb-form-field>
            <label for="category">Category</label>
            <nb-select formControlName="category" placeholder="Select category">
              <nb-option *ngFor="let category of categories" [value]="category">{{
                category
              }}</nb-option>
            </nb-select>
            <div
              *ngIf="
                adForm.get('category')?.hasError('required') && adForm.get('category')?.touched
              "
              class="error-message"
            >
              Category is required
            </div>
          </nb-form-field>
        </div>

        <div class="form-group">
          <nb-form-field>
            <label for="price">Price</label>
            <input nbInput type="number" formControlName="price" placeholder="Enter price" />
            <div
              *ngIf="adForm.get('price')?.hasError('required') && adForm.get('price')?.touched"
              class="error-message"
            >
              Price is required
            </div>
          </nb-form-field>
        </div>

        <div class="form-group">
          <nb-form-field>
            <label for="location">Location</label>
            <input nbInput formControlName="location" placeholder="Enter location" />
            <div
              *ngIf="
                adForm.get('location')?.hasError('required') && adForm.get('location')?.touched
              "
              class="error-message"
            >
              Location is required
            </div>
          </nb-form-field>
        </div>

        <div class="form-group">
          <label>Images</label>
          <div class="image-upload-container">
            <button nbButton status="basic" (click)="onAddImage()">
              <nb-icon icon="plus-outline"></nb-icon>
              Add Image
            </button>
            <div class="image-preview" *ngIf="imagePreviewUrl">
              <img [src]="imagePreviewUrl" alt="Preview" />
              <button nbButton status="danger" class="remove-button" (click)="onRemoveImage()">
                <nb-icon icon="trash-2-outline"></nb-icon>
              </button>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button nbButton status="primary" [disabled]="adForm.invalid" type="submit">
            Create Advertisement
          </button>
          <button nbButton status="basic" type="button" (click)="onCancel()">Cancel</button>
        </div>
      </form>
    </nb-card-body>
  </nb-card>
</div>
