<div class="wallet-container">
  <p-card>
    <ng-template pTemplate="header">
      <h3>My Wallet</h3>
    </ng-template>

    <div class="balance-section">
      <h4>Current Balance</h4>
      <div class="balance-amount">{{ formatCurrency(balance) }}</div>
      <div class="action-buttons">
        <p-button
          icon="pi pi-plus"
          label="Deposit"
          severity="success"
          (onClick)="openDepositDialog()"
        ></p-button>
        <p-button
          icon="pi pi-arrow-up"
          label="Withdraw"
          severity="info"
          (onClick)="openWithdrawDialog()"
        ></p-button>
        <p-button
          icon="pi pi-sync"
          label="Transfer"
          severity="primary"
          (onClick)="openTransferDialog()"
        ></p-button>
      </div>
    </div>

    <div class="transactions-section">
      <h4>Recent Transactions</h4>
      <p-card *ngIf="transactions.length > 0">
        <p-listbox
          [options]="transactions"
          [listStyle]="{ 'max-height': '300px' }"
          styleClass="w-full"
        >
          <ng-template let-transaction pTemplate="item">
            <div
              class="transaction-item cursor-pointer"
              (click)="openTransactionDetails(transaction)"
            >
              <div class="transaction-icon">
                <i [class]="'pi ' + getTransactionTypeIconPrime(transaction.type)"></i>
              </div>
              <div class="transaction-details">
                <div class="transaction-type">{{ transaction.type }}</div>
                <div class="transaction-date">{{ formatDate(transaction.createdAt) }}</div>
              </div>
              <div class="transaction-amount">
                {{ formatCurrency(transaction.amount) }}
              </div>
              <div class="transaction-status">
                <p-tag
                  [value]="transaction.status"
                  [severity]="getTransactionStatusClass(transaction.status)"
                ></p-tag>
              </div>
            </div>
          </ng-template>
        </p-listbox>
      </p-card>
      <p-card *ngIf="transactions.length === 0">
        <div class="empty-state">
          <i class="pi pi-credit-card text-6xl text-500"></i>
          <p>No transactions yet</p>
        </div>
      </p-card>
    </div>

    <div class="payment-methods-section">
      <div class="section-header">
        <h4>Payment Methods</h4>
        <p-button
          icon="pi pi-plus"
          label="Add New"
          severity="secondary"
          size="small"
          (onClick)="openAddPaymentMethodDialog()"
        ></p-button>
      </div>
      <p-card *ngIf="paymentMethods.length > 0">
        <p-listbox
          [options]="paymentMethods"
          [listStyle]="{ 'max-height': '300px' }"
          styleClass="w-full"
        >
          <ng-template let-method pTemplate="item">
            <div class="payment-method-item">
              <div class="payment-method-icon">
                <i [class]="'pi ' + getPaymentMethodIconPrime(method.type)"></i>
              </div>
              <div class="payment-method-details">
                <div class="payment-method-name">{{ method.name }}</div>
                <div class="payment-method-info">
                  <span *ngIf="method.cardDetails">•••• {{ method.cardDetails.last4 }}</span>
                </div>
              </div>
              <div class="payment-method-actions">
                <p-tag *ngIf="method.isDefault" value="Default" severity="success"></p-tag>
                <p-button
                  *ngIf="!method.isDefault"
                  label="Set Default"
                  severity="secondary"
                  size="small"
                  (onClick)="setDefaultPaymentMethod(method)"
                ></p-button>
                <p-button
                  icon="pi pi-trash"
                  severity="danger"
                  size="small"
                  (onClick)="removePaymentMethod(method)"
                ></p-button>
              </div>
            </div>
          </ng-template>
        </p-listbox>
      </p-card>
      <p-card *ngIf="paymentMethods.length === 0">
        <div class="empty-state">
          <i class="pi pi-credit-card text-6xl text-500"></i>
          <p>No payment methods added yet</p>
        </div>
      </p-card>
    </div>
  </p-card>
</div>
