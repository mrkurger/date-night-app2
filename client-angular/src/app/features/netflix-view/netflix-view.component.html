<div class="netflix-container">
  <!-- Hero Section -->
  <div class="hero-section" *ngIf="featuredAd">
    <div class="hero-background" [style.background-image]="'url(' + getMediaUrl(featuredAd) + ')'">
      <div class="hero-gradient"></div>
    </div>
    <div class="hero-content container">
      <div class="hero-info">
        <h1 class="hero-title">{{ featuredAd.title }}</h1>
        <p class="hero-location" *ngIf="featuredAd.location">
          <i class="fas fa-map-marker-alt"></i> {{ featuredAd.location }}
        </p>
        <p class="hero-description">{{ featuredAd.description }}</p>
        <div class="hero-actions">
          <button class="btn btn-primary btn-view" (click)="viewAdDetails(featuredAd._id)">
            <i class="fas fa-info-circle"></i> View Profile
          </button>
          <button class="btn btn-outline-light btn-like" (click)="likeAd(featuredAd._id, $event)">
            <i class="fas fa-heart"></i> Add to Favorites
          </button>
          <button class="btn btn-outline-light btn-chat" (click)="startChat(featuredAd._id, $event)">
            <i class="fas fa-comment"></i> Start Chat
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Filters Bar -->
    <div class="filters-bar">
      <div class="container">
        <div class="filters-content">
          <h2 class="section-title">Browse Profiles</h2>
          <button class="filter-button" (click)="openFilters()">
            <i class="fas fa-sliders-h"></i> Filters
          </button>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div class="loading-container" *ngIf="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="loading-text">Loading content...</p>
    </div>

    <!-- Error State -->
    <div class="error-container" *ngIf="error && !loading">
      <div class="error-icon">
        <i class="fas fa-exclamation-circle"></i>
      </div>
      <p class="error-text">{{ error }}</p>
      <button class="btn btn-primary retry-button" (click)="loadAds()">
        <i class="fas fa-redo"></i> Try Again
      </button>
    </div>

    <!-- Netflix-style Rows -->
    <div class="netflix-rows" *ngIf="!loading && !error">
      <div class="row-section" *ngFor="let category of categories; let i = index">
        <div class="container">
          <h2 class="row-title">{{ category }}</h2>
          
          <div class="row-container-wrapper">
            <button class="row-nav prev-button" (click)="scrollRow(category, 'left')">
              <i class="fas fa-chevron-left"></i>
            </button>
            
            <div class="row-container" #rowContainer>
              <div class="row-item" *ngFor="let ad of adsByCategory[category]" (click)="viewAdDetails(ad._id)">
                <div class="row-item-media">
                  <img 
                    [src]="getMediaUrl(ad)" 
                    alt="{{ ad.title }}" 
                    class="row-item-image">
                    
                  <div class="row-item-overlay">
                    <div class="row-item-info">
                      <h3 class="row-item-title">{{ ad.title }}</h3>
                      <p class="row-item-location" *ngIf="ad.location">
                        <i class="fas fa-map-marker-alt"></i> {{ ad.location }}
                      </p>
                    </div>
                    <div class="row-item-actions">
                      <button class="action-button info-button" (click)="$event.stopPropagation(); viewAdDetails(ad._id)">
                        <i class="fas fa-info-circle"></i>
                      </button>
                      <button class="action-button like-button" (click)="$event.stopPropagation(); likeAd(ad._id, $event)">
                        <i class="fas fa-heart"></i>
                      </button>
                      <button class="action-button chat-button" (click)="$event.stopPropagation(); startChat(ad._id, $event)">
                        <i class="fas fa-comment"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <button class="row-nav next-button" (click)="scrollRow(category, 'right')">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
          
          <div class="empty-row" *ngIf="adsByCategory[category]?.length === 0">
            <p class="empty-row-text">No profiles in this category</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Filters Modal -->
<div class="modal fade" id="filtersModal" tabindex="-1" aria-labelledby="filtersModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="filtersModalLabel">Filter Profiles</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="filterForm">
          <div class="mb-3">
            <label for="category" class="form-label">Category</label>
            <select class="form-select" id="category" formControlName="category">
              <option value="">All Categories</option>
              <option value="Escort">Escort</option>
              <option value="Striptease">Striptease</option>
              <option value="Massage">Massage</option>
            </select>
          </div>
          
          <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <select class="form-select" id="location" formControlName="location">
              <option value="">All Locations</option>
              <option value="Oslo">Oslo</option>
              <option value="Bergen">Bergen</option>
              <option value="Trondheim">Trondheim</option>
              <option value="Stavanger">Stavanger</option>
            </select>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Currently Touring</label>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="touringOnly" formControlName="touringOnly">
              <label class="form-check-label" for="touringOnly">Show only touring profiles</label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="applyFilters()" data-bs-dismiss="modal">Apply Filters</button>
      </div>
    </div>
  </div>
</div>