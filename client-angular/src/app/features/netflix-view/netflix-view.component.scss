@use 'src/styles/design-system/index.scss' as ds;
@use 'sass:color';
@use '../../core/design/design-tokens' as tokens;

// Netflix View Component Styles with Emerald Integration
// Variables for customization
$hero-section-height: 70vh;
$card-animation-duration: 300ms;

:host {
  display: block;

  // Override Emerald component variables for consistent styling
  --primary-500: #{color-primary};
  --primary-600: #{tokens.$color-primary-dark};
  --primary-700: #{color.adjust(tokens.$color-primary-dark, $lightness: -10%)};
  --neutral-100: #{tokens.$color-white};
  --neutral-900: #{tokens.$color-black};
}

.netflix-container {
  margin-bottom: spacing-16;
}

// Hero Section Customization
::ng-deep emerald-page-header {
  margin-bottom: tokens.$spacing-12;

  .emerald-page-header {
    height: $hero-section-height;
    min-height: 600px;

    &__background {
      &::after {
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.1) 0%,
          rgba(0, 0, 0, 0.5) 50%,
          rgba(0, 0, 0, 0.8) 100%
        );
      }
    }

    &__content {
      max-width: 800px;
    }

    &__title {
      font-size: tokens.$font-size-3xl;
      font-weight: tokens.$font-weight-bold;
      margin-bottom: tokens.$spacing-4;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    &__subtitle {
      font-size: tokens.$font-size-lg;
      margin-bottom: tokens.$spacing-4;
      display: flex;
      align-items: center;

      &::before {
        content: '\f3c5'; // Map marker icon
        font-family: 'Font Awesome 5 Free';
        font-weight: 900;
        margin-right: tokens.$spacing-2;
        color: tokens.$primary-500;
      }
    }

    &__actions {
      margin-top: tokens.$spacing-6;
    }
  }
}

// Hero content styling
.hero-content {
  display: flex;
  flex-direction: column;
  gap: tokens.$spacing-4;
}

// Hero description styling
.hero-description {
  font-size: tokens.$font-size-lg;
  margin: tokens.$spacing-6 0;
  line-height: 1.7;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3; // Standard property for compatibility
  -webkit-box-orient: vertical;
  overflow: hidden;
  color: tokens.$neutral-100;
}

// Hero tags styling
.hero-tags {
  display: flex;
  flex-wrap: wrap;
  gap: tokens.$spacing-2;
  margin-top: tokens.$spacing-2;

  ::ng-deep emerald-label {
    margin-bottom: tokens.$spacing-2;

    .emerald-label {
      background-color: rgba(tokens.$neutral-900, 0.6);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(tokens.$neutral-100, 0.2);

      &:hover {
        background-color: rgba(tokens.$neutral-900, 0.8);
      }
    }
  }
}

// Main Content
.netflix-content {
  padding-bottom: tokens.$spacing-16;
}

// Filters Bar
.filters-bar {
  margin-bottom: tokens.$spacing-8;
  position: relative;
  z-index: 1;
}

.filters-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: tokens.$spacing-4 0;
}

.section-title {
  font-family: tokens.$font-family-base;
  font-size: tokens.$font-size-2xl;
  font-weight: tokens.$font-weight-bold;
  margin: 0;
  color: tokens.$neutral-900;
}

.filter-button {
  background-color: tokens.$neutral-100;
  border: none;
  border-radius: tokens.$border-radius-md;
  padding: tokens.$spacing-2 tokens.$spacing-4;
  font-weight: tokens.$font-weight-medium;
  font-size: tokens.$font-size-sm;
  color: tokens.$neutral-700;
  box-shadow: tokens.$shadow-sm;
  transition: all tokens.$transition-normal tokens.$transition-ease;

  &:hover {
    box-shadow: tokens.$shadow-md;
    transform: translateY(-2px);
    color: tokens.$primary-500;
  }

  i {
    margin-right: tokens.$spacing-2;
    color: tokens.$primary-500;
  }
}

// Loading State
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  text-align: center;
  padding: tokens.$spacing-8 0;
}

.loading-text {
  margin-top: tokens.$spacing-4;
  color: tokens.$neutral-600;
  font-weight: tokens.$font-weight-medium;
}

// Error State
.error-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  text-align: center;
  padding: tokens.$spacing-8;
}

.error-icon {
  font-size: tokens.$font-size-4xl;
  color: tokens.$error;
  margin-bottom: tokens.$spacing-4;
}

.error-text {
  font-size: tokens.$font-size-xl;
  font-weight: tokens.$font-weight-medium;
  color: tokens.$neutral-800;
  margin-bottom: tokens.$spacing-6;
}

.retry-button {
  padding: tokens.$spacing-2 tokens.$spacing-6;
  background-color: tokens.$primary-500;
  color: tokens.$neutral-100;
  border: none;
  border-radius: tokens.$border-radius-md;
  font-weight: tokens.$font-weight-medium;
  transition: all tokens.$transition-normal tokens.$transition-ease;

  &:hover {
    background-color: tokens.$primary-600;
    transform: translateY(-2px);
    box-shadow: tokens.$shadow-md;
  }

  i {
    margin-right: tokens.$spacing-2;
  }
}

// Netflix-style Rows
.netflix-rows {
  margin-top: tokens.$spacing-8;
}

.row-section {
  margin-bottom: tokens.$spacing-12;
}

.row-title {
  font-family: tokens.$font-family-base;
  font-size: tokens.$font-size-xl;
  font-weight: tokens.$font-weight-semibold;
  margin-bottom: tokens.$spacing-4;
  color: tokens.$neutral-800;
}

// Empty state
.empty-row {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
  background-color: tokens.$neutral-200;
  border-radius: tokens.$border-radius-lg;
  margin: tokens.$spacing-4 0;
}

.empty-row-text {
  color: tokens.$neutral-600;
  font-weight: tokens.$font-weight-medium;
}

// CardGrid customization
::ng-deep emerald-card-grid {
  .emerald-card-grid {
    &__netflix-row {
      position: relative;
      overflow: visible;

      // Add navigation arrows
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        width: 60px;
        z-index: 2;
        pointer-events: none;
      }

      &::before {
        left: 0;
        background: linear-gradient(to right, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
      }

      &::after {
        right: 0;
        background: linear-gradient(to left, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
      }
    }
  }
}

// AppCard customization
::ng-deep emerald-app-card {
  .emerald-app-card {
    transition:
      transform $card-animation-duration tokens.$transition-ease,
      box-shadow $card-animation-duration tokens.$transition-ease;

    &:hover {
      transform: translateY(-8px) scale(1.05);
      z-index: 5;
      box-shadow: tokens.$shadow-lg;
    }

    &--netflix {
      height: 280px;

      .emerald-app-card__content-overlay {
        background: linear-gradient(
          to top,
          rgba(tokens.$neutral-900, 0.8),
          rgba(tokens.$neutral-900, 0)
        );
      }
    }

    &__title {
      font-weight: tokens.$font-weight-bold;
    }

    &__fab {
      &--left {
        background-color: tokens.$error;
      }

      &--right {
        background-color: tokens.$primary-500;
      }
    }
  }
}

// Modal Styles
.modal-content {
  border-radius: tokens.$border-radius-lg;
  border: none;
  box-shadow: tokens.$shadow-xl;
}

.modal-header {
  border-bottom: 1px solid tokens.$neutral-300;
  padding: tokens.$spacing-4 tokens.$spacing-6;
}

.modal-title {
  font-family: tokens.$font-family-base;
  font-weight: tokens.$font-weight-semibold;
  color: tokens.$neutral-800;
}

.modal-body {
  padding: tokens.$spacing-6;
}

.modal-footer {
  border-top: 1px solid tokens.$neutral-300;
  padding: tokens.$spacing-4 tokens.$spacing-6;
}

// Floating Action Button customization
::ng-deep emerald-floating-action-button {
  .emerald-floating-action-button {
    &__button {
      background-color: tokens.$primary-500;

      &:hover {
        background-color: tokens.$primary-600;
      }
    }
  }
}

// Toggle customization
::ng-deep emerald-toggle {
  .emerald-toggle {
    &__switch {
      &--checked {
        background-color: tokens.$primary-500;
      }
    }
  }
}

// Responsive Adjustments
@media (max-width: tokens.$breakpoint-lg) {
  ::ng-deep emerald-page-header {
    .emerald-page-header {
      height: 60vh;
      min-height: 500px;

      &__title {
        font-size: tokens.$font-size-2xl;
      }
    }
  }

  .hero-description {
    font-size: 1rem;
  }
}

@media (max-width: tokens.$breakpoint-md) {
  ::ng-deep emerald-page-header {
    .emerald-page-header {
      height: 50vh;
      min-height: 400px;

      &__actions {
        flex-wrap: wrap;
        gap: tokens.$spacing-2;
      }
    }
  }

  .hero-description {
    font-size: tokens.$font-size-base;
    -webkit-line-clamp: 2;
    line-clamp: 2;
  }

  .section-title {
    font-size: tokens.$font-size-xl;
  }
}

@media (max-width: tokens.$breakpoint-sm) {
  ::ng-deep emerald-page-header {
    .emerald-page-header {
      height: 40vh;
      min-height: 300px;

      &__title {
        font-size: tokens.$font-size-xl;
      }

      &__subtitle {
        font-size: tokens.$font-size-base;
      }
    }
  }

  .hero-description {
    font-size: tokens.$font-size-sm;
    margin: tokens.$spacing-4 0;
    -webkit-line-clamp: 2;
    line-clamp: 2;
  }

  .section-title {
    font-size: tokens.$font-size-lg;
  }

  .filters-content {
    flex-direction: column;
    align-items: flex-start;
    gap: tokens.$spacing-2;
  }

  .filter-button {
    margin-top: tokens.$spacing-2;
  }
}
