/* Styles for the converted React/Tailwind components will go here */
/* We will aim to use Nebular's theming capabilities as much as possible */
@use '@nebular/theme/styles/theming' as *;
@use '@nebular/theme/styles/themes/dark' as *; // Or cosmic, or your custom dark theme

// Define specific colors from Tailwind's theme for precise matching
$tailwind-gray-900: #111827;
$tailwind-gray-800: #1f2937; // Used for border in React version
$tailwind-gray-700: #374151; // For input border in React
$tailwind-pink-500: #ec4899;
$tailwind-pink-600: #db2777;
$tailwind-pink-700: #be185d;
$tailwind-gray-300: #d1d5db; // For text
$tailwind-white: #ffffff;

// This component will likely need its own scope for Nebular theming
// if it deviates significantly from the main app theme.

:host {
  display: block;
  height: 100%; // Ensure the component can take full height if needed

  // This makes the nb-layout inside this component behave as the top-level layout
  // for this specific "alternative browsing" feature page.
  nb-layout {
    height: 100vh; // Or 100% if :host has a defined height from its parent

    ::ng-deep nb-layout-column.alt-content-column {
      padding: nb-theme(layout-padding); // Use Nebular theme's padding
      // Add more styling for the main content area of this alternative view if needed
    }

    // Style for the mobile sidebar specific to this component
    nb-sidebar.mobile-sidebar {
      // Nebular might apply default sidebar styles; override as needed
      // Example: Ensure it has a dark background matching the header
      background-color: $tailwind-gray-900; // Match header

      // TODO: Style nb-menu items within this mobile sidebar if they need to differ
      // from the main application's mobile menu.
    }
  }
}

// Class for the header itself if global overrides are too broad
.alt-header {
  // Ensure it uses a dark theme context if the rest of the app might be light
  background-color: $tailwind-gray-900 !important; // Override Nebular theme if needed for exact match
  border-bottom: 1px solid $tailwind-gray-800 !important;
  padding: 0 !important; // Override default nb-layout-header padding if any
}

.header-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  height: nb-theme(header-height); // Use Nebular's header height
  padding: 0 1rem; // Default padding, adjust as needed
  margin: 0 auto; // Centering the container if a max-width is set
  max-width: 1280px; // Typical container max-width like Tailwind's `container` with `px-4`
}

.logo-container {
  display: flex;
  align-items: center;
}

.logo {
  font-size: 1.75rem; // Adjusted size
  font-weight: bold;
  text-decoration: none;
  color: $tailwind-pink-500; // Sensual color
  span {
    color: $tailwind-white; // Meet color
  }

  .text-pink {
    color: nb-theme(color-primary-500); // Nebular primary, should be pink
  }
}

.desktop-navigation {
  flex-grow: 1;
  display: flex;
  justify-content: flex-start; // Align to left after logo
  margin-left: 2rem;

  nb-actions {
    nb-action button.nb-button.ghost-button,
    nb-action button.nb-button[nbButton][ghost] {
      // More specific selector
      color: $tailwind-gray-300;
      font-weight: 500;
      padding: 0.5rem 0.75rem; // Tailwind: px-3 py-2 -> 0.75rem 0.5rem. Adjusted for vertical alignment.
      border-bottom: 2px solid transparent; // For active state underline
      border-radius: nb-theme(button-ghost-border-radius); // Use Nebular's ghost button radius
      &:hover {
        color: $tailwind-white;
        background-color: transparent !important;
      }
      &.active-link {
        color: $tailwind-pink-500;
        border-bottom-color: $tailwind-pink-500;
      }
      nb-icon.menu-chevron-icon {
        font-size: 1rem;
        line-height: 1;
      }
    }

    .rankings-menu-item button.nb-button[nbButton][ghost] {
      display: flex;
      align-items: center;
    }
  }
}

.search-user-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem; // Reduced gap for tighter icons

  nb-action.search-action {
    position: relative; // For input positioning
    button.search-toggle-btn,
    button.search-close-btn {
      color: $tailwind-gray-300;
      &:hover {
        color: $tailwind-white;
      }
    }
    input[nbInput].search-input {
      background-color: $tailwind-gray-800;
      border-color: $tailwind-gray-700;
      color: $tailwind-white;
      width: 0px; // Hidden by default
      padding: nb-theme(input-medium-padding);
      border-radius: nb-theme(input-border-radius);
      transition:
        width 0.3s ease-in-out,
        padding 0.3s ease-in-out;
      &::placeholder {
        color: nb-theme(text-hint-color);
      }
      &:focus {
        // Nebular inputs handle focus styling, ensure it's visible on dark bg
      }
    }
    &.search-visible input[nbInput].search-input {
      width: 200px;
      padding-left: 0.75rem;
      padding-right: 2.5rem; // Space for close button
    }
    button.search-close-btn {
      position: absolute;
      right: 0.25rem;
      top: 50%;
      transform: translateY(-50%);
      display: none; // Hidden by default
    }
    &.search-visible button.search-close-btn {
      display: inline-flex;
    }
    &.search-visible button.search-toggle-btn {
      display: none; // Hide search icon when input is visible
    }
  }

  nb-action button.nb-button[nbButton][ghost] {
    color: $tailwind-gray-300;
    &:hover {
      color: $tailwind-white;
    }
  }

  .nb-button.pink-button.signup-button {
    background-color: $tailwind-pink-600;
    border-color: $tailwind-pink-600;
    color: $tailwind-white;
    &:hover {
      background-color: $tailwind-pink-700;
      border-color: $tailwind-pink-700;
    }
  }

  nb-user {
    ::ng-deep .user-name {
      color: $tailwind-white !important;
    }
    // Optionally style avatar
    // ::ng-deep .user-picture {
    //   border: 1px solid $tailwind-pink-500;
    // }
  }

  .notification-btn {
    position: relative; // For badge positioning
    nb-badge {
      position: absolute;
      top: 0.15rem;
      right: 0.15rem;
    }
  }
}

.mobile-menu-toggle {
  // This class is from bootstrap (d-md-none). Ensure Nebular reset or custom styles don't interfere
  // Or use Nebular's built-in responsive directives if preferred.
  @include nb-media-breakpoint-up(md) {
    display: none !important;
  }
  button.nb-button[nbButton][ghost] {
    color: $tailwind-gray-300;
    &:hover {
      color: $tailwind-white;
    }
  }
}

// TODO: Style nbContextMenu for rankingsMenu and userMenuAccount to match dark theme / pink accents
// TODO: Map Lucide icon styles if custom SVGs are used. For now, relying on Eva icons.
// TODO: Refine colors to exactly match the Tailwind pinks and grays by customizing Nebular theme further or using direct CSS values.
// For example, Tailwind's gray-900 is #111827. Nebular's dark theme color-basic-800 might be different.
// If specific color codes are needed: background-color: #111827;

.alt-footer {
  background-color: $tailwind-gray-900; // Match header background
  border-top: 1px solid $tailwind-gray-800; // border-t
  color: nb-theme(text-hint-color); // For text-muted-foreground
  padding: 0 !important; // Override default nb-layout-footer padding

  .footer-container {
    display: flex;
    flex-direction: column; // Default for mobile
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem; // Tailwind gap-4 is 1rem, reduced for footer
    width: 100%;
    min-height: nb-theme(footer-height); // Use Nebular's footer height as min
    padding: 1.5rem 1rem; // py-6 equivalent (1.5rem = 24px)
    margin: 0 auto;
    max-width: 1280px; // Match header container

    @include nb-media-breakpoint-up(md) {
      flex-direction: row;
      padding: 0 1rem; // md:py-0
      gap: 1rem; // md gap
    }
  }

  .footer-copyright-text {
    text-align: center;
    font-size: nb-theme(text-paragraph-2-font-size); // text-sm
    line-height: nb-theme(text-paragraph-2-line-height); // leading-loose
    @include nb-media-breakpoint-up(md) {
      text-align: left;
    }
  }

  .footer-links {
    display: flex;
    gap: 1rem; // Tailwind gap-4

    .footer-link {
      font-size: nb-theme(text-paragraph-2-font-size); // text-sm
      color: nb-theme(text-hint-color); // text-muted-foreground
      text-decoration: none;
      position: relative; // For underline offset

      &::after {
        // For underline on hover with offset
        content: '';
        position: absolute;
        width: 100%;
        transform: scaleX(0);
        height: 1px;
        bottom: -4px; // underline-offset-4 (approx)
        left: 0;
        background-color: nb-theme(text-hint-color); // Underline color
        transform-origin: bottom right;
        transition: transform 0.25s ease-out;
      }

      &:hover::after {
        transform: scaleX(1);
        transform-origin: bottom left;
      }
      &:hover {
        color: nb-theme(text-basic-color); // Slightly lighten on hover for better visibility
      }
    }
  }
}

// TODO: Review focus states for all interactive elements for visibility on dark theme.

// Styles for the main content area within alt-content-column
.alt-browse-container {
  padding: 1rem; // Overall padding for the browse content

  .search-bar-container {
    margin-bottom: 1.5rem;
    .search-form {
      display: flex;
      gap: 0.75rem;
      align-items: center;

      .search-input-field {
        flex-grow: 1;
        // nb-form-field might add its own margin, adjust if needed
        margin-bottom: 0 !important;
      }
      input[nbInput] {
        // Assuming dark theme for this component, ensure input is styled for it
        // background-color: $tailwind-gray-800; (Example, if not covered by Nebular theme on dark)
        // border-color: $tailwind-gray-700;
      }
      .search-button {
        min-width: 100px; // Ensure text doesn't get too cramped
      }
      .clear-button {
        // Styling for clear button
      }
    }
  }

  .view-tabset {
    margin-bottom: 1.5rem;
    // Custom styling for nb-tabset if needed
    // e.g., border color, active tab indicator to match alt design
  }

  .page-context-title {
    margin-bottom: 1.5rem;
    h2 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    .text-hint {
      color: nb-theme(text-hint-color);
    }
  }

  .content-area-wrapper {
    display: flex;
    gap: 1.5rem;

    .main-content-pane {
      flex: 3; // Takes more space
      // background-color: nb-theme(background-basic-color-2); // Optional distinct background
      // padding: 1rem;
      // border-radius: nb-theme(card-border-radius);
    }

    .sidebar-pane {
      flex: 1; // Takes less space
      // background-color: nb-theme(background-basic-color-2);
      // padding: 1rem;
      // border-radius: nb-theme(card-border-radius);
      @include nb-media-breakpoint-down(md) {
        // Hide sidebar on medium and below
        display: none;
      }
    }
  }

  // Placeholders for sections/components to be converted
  .premium-placeholder,
  .paid-placement-placeholder,
  .chat-widget-placeholder {
    border: 1px dashed nb-theme(border-basic-color-4);
    padding: 2rem;
    text-align: center;
    color: nb-theme(text-hint-color);
    margin-bottom: 1.5rem;
    border-radius: nb-theme(card-border-radius);
  }

  .placeholder-text {
    padding: 2rem;
    text-align: center;
    color: nb-theme(text-hint-color);
  }
}
