<div class="request-password-container">
  <p-card>
    <nb-card-header>
      <h2>Forgot Password</h2>
    </nb-card-header>

    <nb-card-body>
      <form [formGroup]="requestForm" (ngSubmit)="onSubmit()">
        <nb-alert status="danger" *ngIf="errorMessage" class="message-alert">
          {{ errorMessage }}
        </nb-alert>
        <nb-alert status="success" *ngIf="successMessage" class="message-alert">
          {{ successMessage }}
        </nb-alert>

        <p class="form-description">
          Enter your email address and we'll send you instructions to reset your password.
        </p>

        <nb-form-field class="form-field full-width">
          <nb-icon nbPrefix icon="email-outline"></nb-icon>
          <input
            nbInput
            fullWidth
            formControlName="email"
            type="email"
            placeholder="Email"
            autocomplete="email"
            [status]="
              requestForm.get('email')?.invalid && requestForm.get('email')?.touched
                ? 'danger'
                : 'basic'
            "
          />
          <div *ngIf="requestForm.get('email')?.invalid && requestForm.get('email')?.touched">
            <p class="caption status-danger" *ngIf="requestForm.get('email')?.hasError('required')">
              Email is required
            </p>
            <p class="caption status-danger" *ngIf="requestForm.get('email')?.hasError('email')">
              Please enter a valid email address
            </p>
          </div>
        </nb-form-field>

        <div class="form-actions">
          <button
            nbButton
            status="primary"
            size="large"
            type="submit"
            [disabled]="requestForm.invalid || isLoading"
            class="full-width"
          >
            <nb-spinner *ngIf="isLoading" size="small"></nb-spinner>
            <span *ngIf="!isLoading">Send Reset Link</span>
          </button>
        </div>

        <div class="form-footer">
          <a routerLink="/auth/login">Back to Login</a>
        </div>
      </form>
    </nb-card-body>
  </nb-card>
</div>
