<p-card class="tinder-card" #card [ngClass]="cardState" >
  <p-card-body >
    <!-- Media Carousel -->
    <div class="card-media">
      <div *ngIf="isCurrentMediaVideo()" class="video-container">
        <video controls>
          <source [src]="getCurrentMediaUrl()" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </div>
      <img
        *ngIf="!isCurrentMediaVideo()"
        [src]="getCurrentMediaUrl()"
        alt="{{ ad.title }}"
        class="card-image"
      />

      <!-- Media Navigation Dots -->
      <div class="media-dots" *ngIf="ad?.media && ad.media.length > 1">
        <div
          *ngFor="let dot of getMediaDots(); let i = index"
          class="media-dot"
          [ngClass]="{ active: i === currentMediaIndex }"
          (click)="$event.stopPropagation(); currentMediaIndex = i"
        ></div>
      </div>

      <!-- Media Navigation Arrows -->
      <button
        *ngIf="ad?.media && ad.media.length > 1"
        nbButton
        ghost
        size="small"
        class="media-nav-button prev-button"
        (click)="$event.stopPropagation(); prevMedia()"
      >
        <nb-icon icon="chevron-left-outline"></nb-icon>
      </button>
      <button
        *ngIf="ad?.media && ad.media.length > 1"
        nbButton
        ghost
        size="small"
        class="media-nav-button next-button"
        (click)="$event.stopPropagation(); nextMedia()"
      >
        <nb-icon icon="chevron-right-outline"></nb-icon>
      </button>

      <!-- Like/Dislike Indicators -->
      <div class="like-indicator">
        <nb-icon icon="heart" status="success"></nb-icon>
        <span>LIKE</span>
      </div>
      <div class="dislike-indicator">
        <nb-icon icon="close" status="danger"></nb-icon>
        <span>NOPE</span>
      </div>
    </div>

    <!-- Card Content -->
    <div class="card-content">
      <p-card-header >
        <h2 class="card-title">
          {{ ad.title }}
          <nb-badge *ngIf="ad.age" [text]="ad.age" status="info"></nb-badge>
        </h2>
        <p class="card-location" *ngIf="ad.location">
          <nb-icon icon="map-marker-outline"></nb-icon> {{ ad.location }}
        </p>
      </ng-template>

      <div class="card-body">
        <p class="card-description">{{ ad.description }}</p>

        <nb-tag-list *ngIf="ad.tags && ad.tags.length">
          <nb-tag *ngFor="let tag of ad.tags" [text]="tag" appearance="filled"></nb-tag>
        </nb-tag-list>
      </div>

      <p-card-footer >
        <p-button></p-button>
          <nb-icon icon="info-outline"></nb-icon>
        </button>
        <p-button></p-button>
          <nb-icon icon="close-outline"></nb-icon>
        </button>
        <p-button></p-button>
          <nb-icon icon="heart-outline"></nb-icon>
        </button>
        <p-button></p-button>
          <nb-icon icon="message-circle-outline"></nb-icon>
        </button>
      </ng-template>
    </div>
  </ng-template>
</p-card>
