<div class="tinder-card" #card [ngClass]="cardState">
  <!-- Media Carousel -->
  <div class="card-media">
    <div *ngIf="isCurrentMediaVideo()" class="video-container">
      <video controls>
        <source [src]="getCurrentMediaUrl()" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
    <img *ngIf="!isCurrentMediaVideo()" [src]="getCurrentMediaUrl()" alt="{{ ad.title }}" class="card-image">
    
    <!-- Media Navigation Dots -->
    <div class="media-dots" *ngIf="ad?.media && ad.media.length > 1">
      <div 
        *ngFor="let dot of getMediaDots(); let i = index" 
        class="media-dot" 
        [ngClass]="{'active': i === currentMediaIndex}"
        (click)="$event.stopPropagation(); currentMediaIndex = i">
      </div>
    </div>
    
    <!-- Media Navigation Arrows -->
    <button 
      *ngIf="ad?.media && ad.media.length > 1" 
      class="media-nav-button prev-button" 
      (click)="$event.stopPropagation(); prevMedia()">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button 
      *ngIf="ad?.media && ad.media.length > 1" 
      class="media-nav-button next-button" 
      (click)="$event.stopPropagation(); nextMedia()">
      <i class="fas fa-chevron-right"></i>
    </button>
    
    <!-- Like/Dislike Indicators -->
    <div class="like-indicator">
      <i class="fas fa-heart"></i>
      <span>LIKE</span>
    </div>
    <div class="dislike-indicator">
      <i class="fas fa-times"></i>
      <span>NOPE</span>
    </div>
  </div>
  
  <!-- Card Content -->
  <div class="card-content">
    <div class="card-header">
      <h2 class="card-title">{{ ad.title }} <span class="card-age" *ngIf="ad.age">{{ ad.age }}</span></h2>
      <p class="card-location" *ngIf="ad.location">
        <i class="fas fa-map-marker-alt"></i> {{ ad.location }}
      </p>
    </div>
    
    <div class="card-body">
      <p class="card-description">{{ ad.description }}</p>
      
      <div class="card-tags" *ngIf="ad.tags && ad.tags.length">
        <span class="card-tag" *ngFor="let tag of ad.tags">{{ tag }}</span>
      </div>
    </div>
    
    <div class="card-footer">
      <button class="action-button info-button" (click)="onViewDetails($event)">
        <i class="fas fa-info-circle"></i>
      </button>
      <button class="action-button dislike-button" (click)="$event.stopPropagation(); onSwipe('left')">
        <i class="fas fa-times"></i>
      </button>
      <button class="action-button like-button" (click)="$event.stopPropagation(); onSwipe('right')">
        <i class="fas fa-heart"></i>
      </button>
      <button class="action-button chat-button" (click)="onStartChat($event)">
        <i class="fas fa-comment"></i>
      </button>
    </div>
  </div>
</div>