<div class="reviews-page-container">
  <div class="reviews-header">
    <div class="ad-info" *ngIf="adTitle">
      <div class="ad-image" *ngIf="adImage">
        <img [src]="adImage" [alt]="adTitle" loading="lazy" />
      </div>
      <div class="ad-details">
        <h2 class="ad-title">{{ adTitle }}</h2>
        <a [routerLink]="['/ad-details', adId]" class="ad-link">
          View Ad <nb-icon icon="external-link-outline"></nb-icon>
        </a>
      </div>
    </div>

    <div class="reviews-actions" *ngIf="!showReviewForm">
      <p-button label="Primary" class="p-button-primary"></p-button>
        <nb-icon icon="star-outline"></nb-icon>
        Write a Review
      </button>
    </div>
  </div>

  <!-- Review Form -->
  <div class="review-form-wrapper" *ngIf="showReviewForm">
    <app-review-form
      [adId]="adId"
      [existingReview]="editingReview"
      (reviewSubmitted)="onReviewSubmitted($event)"
      (cancel)="onCancelReview()"
    ></app-review-form>
  </div>

  <!-- Reviews List -->
  <div class="reviews-content" *ngIf="!showReviewForm">
    <h3 class="section-title">Reviews</h3>

    <app-reviews-list
      [reviews]="reviews"
      [loading]="loading"
      [totalReviews]="totalReviews"
      [currentPage]="currentPage"
      [pageSize]="pageSize"
      [canManage]="false"
      (pageChange)="onPageChange($event)"
      (editReview)="onEditReview($event)"
      (deleteReview)="onDeleteReview($event)"
      (reactionChange)="onReactionChange($event)"
    ></app-reviews-list>
  </div>
</div>
