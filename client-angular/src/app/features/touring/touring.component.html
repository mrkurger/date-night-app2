<div class="touring-container">
  <div class="header">
    <h1>Touring Advertisers</h1>
    <p class="subtitle">
      Find advertisers who are currently touring or planning to visit your area
    </p>
  </div>

  <div class="row">
    <!-- Currently Touring Section -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h2>Currently Touring</h2>
          <p>Advertisers who are currently on tour</p>
        </div>
        <div class="card-body">
          <div *ngIf="loading" class="text-center">
            <div class="spinner-border"></div>
            <p>Loading touring advertisers...</p>
          </div>

          <div *ngIf="!loading && touringAds.length === 0" class="text-center">
            <p>No advertisers are currently touring.</p>
          </div>

          <div *ngIf="!loading && touringAds.length > 0" class="touring-grid">
            <div *ngFor="let ad of touringAds" class="touring-card">
              <div class="touring-card-image">
                <img [src]="ad.profileImage" [alt]="ad.title" />
                <div class="touring-badge">Touring</div>
              </div>
              <div class="touring-card-content">
                <h3>{{ ad.title }}</h3>
                <p class="advertiser">{{ ad.advertiser.username }}</p>
                <p class="location">
                  <i class="fas fa-map-marker-alt"></i>
                  {{ ad.city }}, {{ ad.county }}
                </p>
                <div class="touring-card-actions">
                  <a [routerLink]="['/ad-details', ad._id]" class="btn btn-primary">View Profile</a>
                  <a
                    [routerLink]="['/chat']"
                    [queryParams]="{ adId: ad._id }"
                    class="btn btn-outline-primary"
                  >
                    <i class="fas fa-comment"></i> Chat
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Upcoming Tours Section -->
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h2>Upcoming Tours</h2>
          <p>Advertisers who are planning to tour soon</p>
        </div>
        <div class="card-body">
          <!-- Filter Form -->
          <form [formGroup]="filterForm" class="filter-form">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="county">County</label>
                  <select id="county" formControlName="county" class="form-control">
                    <option value="">All Counties</option>
                    <option *ngFor="let county of counties" [value]="county">{{ county }}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="city">City</label>
                  <select id="city" formControlName="city" class="form-control">
                    <option value="">All Cities</option>
                    <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="days">Days Ahead</label>
                  <select id="days" formControlName="days" class="form-control">
                    <option [value]="7">Next 7 days</option>
                    <option [value]="14">Next 14 days</option>
                    <option [value]="30">Next 30 days</option>
                    <option [value]="90">Next 3 months</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="filter-actions">
              <button type="button" class="btn btn-outline-secondary" (click)="resetFilters()">
                Reset Filters
              </button>
            </div>
          </form>

          <div *ngIf="loading" class="text-center mt-4">
            <div class="spinner-border"></div>
            <p>Loading upcoming tours...</p>
          </div>

          <div *ngIf="!loading && upcomingTours.length === 0" class="text-center mt-4">
            <p>No upcoming tours match your filters.</p>
          </div>

          <div *ngIf="!loading && upcomingTours.length > 0" class="upcoming-list mt-4">
            <div *ngFor="let ad of upcomingTours" class="upcoming-item">
              <div class="upcoming-image">
                <img [src]="ad.profileImage" [alt]="ad.title" />
              </div>
              <div class="upcoming-content">
                <h3>{{ ad.title }}</h3>
                <p class="advertiser">{{ ad.advertiser.username }}</p>

                <div *ngFor="let itinerary of ad.travelItinerary" class="itinerary-item">
                  <div *ngIf="itinerary.status === 'planned'" class="itinerary-details">
                    <div class="destination">
                      <i class="fas fa-map-marker-alt"></i>
                      {{ itinerary.destination.city }}, {{ itinerary.destination.county }}
                    </div>
                    <div class="dates">
                      <i class="far fa-calendar-alt"></i>
                      {{ formatDate(itinerary.arrivalDate) }} -
                      {{ formatDate(itinerary.departureDate) }}
                    </div>
                  </div>
                </div>

                <div class="upcoming-actions">
                  <a [routerLink]="['/ad-details', ad._id]" class="btn btn-sm btn-primary"
                    >View Profile</a
                  >
                  <a
                    [routerLink]="['/chat']"
                    [queryParams]="{ adId: ad._id }"
                    class="btn btn-sm btn-outline-primary"
                  >
                    <i class="fas fa-comment"></i> Chat
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
