<div class="p-dialog-content">
  <!-- No separate header needed as it's moved to parent p-dialog -->
  <!-- Media Preview -->
  <div class="media-preview" *ngIf="media" [ngClass]="{ fullscreen: isFullscreen }">
    <!-- Media Error State -->
    <div *ngIf="mediaError" class="media-error">
      <i class="fas fa-exclamation-triangle"></i>
      <p><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Unable to load media content</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></p>
      <small><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>The media may be unavailable or in an unsupported format</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></small>
    </div>

    <!-- Image Preview -->
    <img
      *ngIf="!mediaError && media.type === 'image'"
      [src]="safeMediaUrl"
      alt="Content preview" i18n-alt
      (error)="onMediaError()"
    />

    <!-- Video Preview -->
    <video
      *ngIf="!mediaError && media.type === 'video'"
      [src]="safeMediaUrl"
      controls
      (error)="onMediaError()"
    ></video>

    <!-- Fullscreen Toggle -->
    <button class="fullscreen-toggle" (click)="toggleFullscreen()" *ngIf="!mediaError">
      <i class="fas" [ngClass]="isFullscreen ? 'fa-compress' : 'fa-expand'"></i>
    </button>
  </div>

  <!-- Media Information -->
  <div class="media-info" *ngIf="media">
    <div class="media-detail">
      <label><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Ad Title:</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></label>
      <span><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>{{ media.adTitle }}</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></span>
    </div>
    <div class="media-detail">
      <label><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Media Type:</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></label>
      <span><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>{{ media.type | titlecase }}</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></span>
    </div>
    <div class="media-detail">
      <label><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Uploaded:</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></label>
      <span><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>{{ media.createdAt | date: 'medium' }}</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></span>
    </div>
  </div>

  <!-- Moderation Form -->
  <form [formGroup]="form" class="moderation-form">
    <div class="p-field">
      <label class="p-mb-2"><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Moderation Decision</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></label>
      <div class="p-d-flex p-jc-between p-mb-3">
        <p-button
          styleClass="p-button-outlined p-button-success status-option" i18n-styleClass
          [ngClass]="{ 'p-button-active': form.get('status')?.value === 'approved' }"
          (onClick)="form.get('status')?.setValue('approved')"
          label="Approve" i18n-label
          icon="fas fa-check-circle" i18n-icon
        >
          <ng-template pTemplate="content">
            <div class="status-option-content">
              <i class="fas fa-check-circle p-mr-2"></i>
              <div>
                <div class="status-label"><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Approve</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></div>
                <small><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Content meets platform guidelines</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></small>
              </div>
            </div>
          </ng-template>
        </p-button>

        <p-button
          styleClass="p-button-outlined p-button-danger status-option" i18n-styleClass
          [ngClass]="{ 'p-button-active': form.get('status')?.value === 'rejected' }"
          (onClick)="form.get('status')?.setValue('rejected')"
          label="Reject" i18n-label
          icon="fas fa-times-circle" i18n-icon
        >
          <ng-template pTemplate="content">
            <div class="status-option-content">
              <i class="fas fa-times-circle p-mr-2"></i>
              <div>
                <div class="status-label"><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Reject</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></div>
                <small><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Content violates platform guidelines</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></small>
              </div>
            </div>
          </ng-template>
        </p-button>
      </div>
    </div>

    <div class="p-field notes-field">
      <label class="p-mb-2"><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Moderation Notes</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></label>
      <textarea
        pInputTextarea
        formControlName="notes"
        rows="4"
        [autoResize]="true"
        placeholder="Provide detailed explanation for your decision..." i18n-placeholder
      ></textarea>
      <div
        class="p-d-flex p-jc-end p-mt-1 char-count"
        [ngClass]="{
          'p-text-warning': form.get('notes')?.value?.length > 400,
          'p-text-danger': form.get('notes')?.value?.length > 450,
        }"
      >
        <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>{{ form.get('notes')?.value?.length || 0 }}/500 characters
      </ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></div>
      <small class="p-error" *ngIf="form.get('notes')?.invalid && form.get('notes')?.touched">
        <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Notes are required and must be less than 500 characters.
      </ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></small>
    </div>
  </form>

  <!-- Moderation Guidelines -->
  <div class="moderation-guidelines">
    <h5><i class="fas fa-info-circle"></i> <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Moderation Guidelines</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></h5>
    <ul>
      <li>
        <strong><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Reject</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></strong> <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>content that contains explicit nudity, violence, or illegal
        activities
      </ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></li>
      <li><strong><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Reject</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></strong> <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>content that includes minors in inappropriate contexts</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></li>
      <li><strong><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Reject</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></strong> <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>content that contains personally identifiable information</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></li>
      <li><strong><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Approve</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></strong> <ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>content that follows platform guidelines for adult content</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></li>
      <li><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n><ng-container i18n>Always provide clear notes explaining your decision, especially for rejections</ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></ng-container></li>
    </ul>
  </div>
</div>

<div class="p-dialog-footer">
  <p-button
    label="Cancel" i18n-label
    icon="fas fa-times" i18n-icon
    styleClass="p-button-secondary" i18n-styleClass
    (onClick)="onClose.emit()"
  >
  </p-button>
  <p-button
    *ngIf="form.get('status')?.value === 'rejected'"
    label="Reject Content" i18n-label
    icon="fas fa-ban" i18n-icon
    styleClass="p-button-danger" i18n-styleClass
    [disabled]="form.invalid"
    (onClick)="validateAndSubmit()"
  >
  </p-button>
  <p-button
    *ngIf="form.get('status')?.value === 'approved'"
    label="Approve Content" i18n-label
    icon="fas fa-check" i18n-icon
    styleClass="p-button-success" i18n-styleClass
    [disabled]="form.invalid"
    (onClick)="validateAndSubmit()"
  >
  </p-button>
</div>
