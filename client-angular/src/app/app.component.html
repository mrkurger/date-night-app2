<div class="app-layout">
  <p-toolbar styleClass="app-header">
    <div class="p-toolbar-group-left header-container-left">
      <button
        pButton
        type="button"
        icon="pi pi-bars"
        class="p-button-text"
        (click)="toggleSidebar()"
      ></button>
      <span class="app-title">Date Night App</span>
    </div>
    <div class="p-toolbar-group-right header-container-right">
      <div class="action-items">
        <button
          pButton
          type="button"
          class="p-button-text notification-button"
          (click)="notificationsOverlay.toggle($event)"
        >
          <i
            class="pi pi-bell"
            pBadge
            [value]="notificationCount > 0 ? notificationCount.toString() : null"
            [severity]="notificationCount > 0 ? 'danger' : null"
          ></i>
        </button>
        <p-overlayPanel #notificationsOverlay [showCloseIcon]="true">
          <ng-template pTemplate>
            <h5>Notifications</h5>
            <div *ngIf="notifications && notifications.length > 0; else noNotifications">
              <ul>
                <li *ngFor="let notification of notifications">{{ notification.message }}</li>
              </ul>
            </div>
            <ng-template #noNotifications>
              <p>No new notifications.</p>
            </ng-template>
          </ng-template>
        </p-overlayPanel>

        <div class="user-menu-container">
          <button
            pButton
            type="button"
            class="p-button-text user-button"
            (click)="userMenu.toggle($event)"
          >
            <p-avatar
              [image]="userAvatar"
              [label]="!userAvatar && userName ? userName.substring(0, 1) : null"
              shape="circle"
              styleClass="user-avatar"
            ></p-avatar>
            <span class="user-name">{{ userName }}</span>
            <i class="pi pi-angle-down"></i>
          </button>
          <p-menu #userMenu [model]="userMenuItems" [popup]="true"></p-menu>
        </div>
      </div>
    </div>
  </p-toolbar>

  <p-sidebar [(visible)]="isSidebarVisible" [showCloseIcon]="true" [modal]="false">
    <ng-template pTemplate="header">
      <h3>Menu</h3>
    </ng-template>
    <p-panelMenu [model]="menuItems" [style]="{ width: '100%' }"></p-panelMenu>
  </p-sidebar>

  <div class="main-content" [ngClass]="{ 'sidebar-active': isSidebarVisible }">
    <p-card *ngIf="isLoading" styleClass="loading-card">
      <div class="loading-container">
        <p-progressSpinner strokeWidth="4"></p-progressSpinner>
        <span>Loading...</span>
      </div>
    </p-card>
    <router-outlet *ngIf="!isLoading"></router-outlet>
  </div>

  <div class="layout-footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h5 class="footer-heading">DateNight<span class="text-primary">.io</span></h5>
          <p class="footer-text">
            The premier platform for escort, striptease, and massage services in Scandinavia.
          </p>
        </div>
        <div class="footer-section">
          <h5 class="footer-heading">Quick Links</h5>
          <ul class="footer-links">
            <li><a pButton label="About Us" class="p-button-text" routerLink="/about"></a></li>
            <li>
              <a pButton label="Terms of Service" class="p-button-text" routerLink="/terms"></a>
            </li>
            <li>
              <a pButton label="Privacy Policy" class="p-button-text" routerLink="/privacy"></a>
            </li>
            <li><a pButton label="Contact Us" class="p-button-text" routerLink="/contact"></a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h5 class="footer-heading">Connect With Us</h5>
          <div class="social-links">
            <a pButton icon="pi pi-facebook" class="p-button-text social-link" href="#"></a>
            <a pButton icon="pi pi-twitter" class="p-button-text social-link" href="#"></a>
            <a pButton icon="pi pi-instagram" class="p-button-text social-link" href="#"></a>
            <a pButton icon="pi pi-send" class="p-button-text social-link" href="#"></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 DateNight.io - All rights reserved</p>
      </div>
    </div>
  </div>
</div>

<!-- Global/Utility Components that might live outside the main navigation structure -->
<!-- These might need their own PrimeNG migration strategy if they use Nebular -->
<app-notification [notifications]="notifications"></app-notification>
<!-- Assuming notifications are managed by a service -->
<app-alert-notifications></app-alert-notifications>
<app-debug-info></app-debug-info>

<!-- 
    This file was partially migrated to PrimeNG by an automated script (2025-05-24T05:15:38.051Z).
    It may have processed Bootstrap and/or Nebular buttons.
    Please review the changes carefully, especially for:
    1. Correct component behavior and visual appearance.
    2. Ensuring necessary PrimeNG modules (e.g., ButtonModule from 'primeng/button') 
       are imported in the corresponding Angular component's NgModule.
    3. Handling any complex attributes, event bindings, or button types 
       not covered by this script.
    4. Icon mapping (Nebular icons to PrimeIcons).
    5. The use of 'w-full' for 'w-full' or 'fullWidth' assumes PrimeFlex is available.
-->
<!-- 
    This file was partially migrated to PrimeNG by an automated script (2025-05-24T05:25:05.102Z).
    It may have processed Bootstrap and/or Nebular buttons.
    Please review the changes carefully, especially for:
    1. Correct component behavior and visual appearance.
    2. Ensuring necessary PrimeNG modules (e.g., ButtonModule from 'primeng/button') 
       are imported in the corresponding Angular component's NgModule or standalone component imports.
    3. Handling any complex attributes, event bindings, or button types 
       not covered by this script.
    4. Icon mapping (Nebular icons to PrimeIcons).
    5. The use of 'w-full' for 'btn-block' or 'fullWidth' assumes PrimeFlex is available.
-->
