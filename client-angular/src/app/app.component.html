<nb-layout>
  <nb-layout-header fixed>
    <div class="header-container">
      <div class="left">
        <button nbButton ghost (click)="toggleSidebar()">
          <nb-icon icon="menu-2-outline"></nb-icon>
        </button>
        <span class="app-title">Date Night App</span>
      </div>
      <div class="right">
        <nb-actions size="medium">
          <nb-action
            [badgeText]="notificationCount.toString()"
            [badgeStatus]="notificationCount > 0 ? 'danger' : 'basic'"
          >
            <nb-icon icon="bell-outline"></nb-icon>
          </nb-action>
          <nb-action>
            <nb-user
              [name]="userName"
              [picture]="userAvatar"
              [nbContextMenu]="userMenu"
              nbContextMenuTag="user-menu"
              size="medium"
            >
            </nb-user>
          </nb-action>
        </nb-actions>
      </div>
    </div>
  </nb-layout-header>

  <nb-sidebar>
    <nb-menu [items]="menuItems"></nb-menu>
  </nb-sidebar>

  <nb-layout-column class="main-content">
    <nb-card *ngIf="isLoading" class="loading-card">
      <nb-card-body class="loading-container">
        <nb-spinner status="primary"></nb-spinner>
        <span>Loading...</span>
      </nb-card-body>
    </nb-card>
    <router-outlet></router-outlet>
  </nb-layout-column>

  <nb-layout-footer fixed>
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h5 class="footer-heading">DateNight<span class="text-primary">.io</span></h5>
          <p class="footer-text">
            The premier platform for escort, striptease, and massage services in Scandinavia.
          </p>
        </div>
        <div class="footer-section">
          <h5 class="footer-heading">Quick Links</h5>
          <ul class="footer-links">
            <li><a nbButton ghost routerLink="/about">About Us</a></li>
            <li><a nbButton ghost routerLink="/terms">Terms of Service</a></li>
            <li><a nbButton ghost routerLink="/privacy">Privacy Policy</a></li>
            <li><a nbButton ghost routerLink="/contact">Contact Us</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h5 class="footer-heading">Connect With Us</h5>
          <div class="social-links">
            <a nbButton ghost href="#" class="social-link">
              <nb-icon icon="facebook-outline"></nb-icon>
            </a>
            <a nbButton ghost href="#" class="social-link">
              <nb-icon icon="twitter-outline"></nb-icon>
            </a>
            <a nbButton ghost href="#" class="social-link">
              <nb-icon icon="camera-outline"></nb-icon>
            </a>
            <a nbButton ghost href="#" class="social-link">
              <nb-icon icon="paper-plane-outline"></nb-icon>
            </a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 DateNight.io - All rights reserved</p>
      </div>
    </div>
  </nb-layout-footer>
</nb-layout>

<!-- Context Menus -->
<ng-template #notificationsMenu>
  <nb-card>
    <nb-card-header>Notifications</nb-card-header>
    <nb-list>
      <nb-list-item *ngFor="let notification of notifications">
        {{ notification.message }}
      </nb-list-item>
    </nb-list>
  </nb-card>
</ng-template>

<ng-template #userMenu>
  <nb-menu>
    <nb-menu-item title="Profile" icon="person-outline" link="/profile"></nb-menu-item>
    <nb-menu-item title="Settings" icon="settings-2-outline" link="/settings"></nb-menu-item>
    <nb-menu-item
      title="Preferences Demo"
      icon="options-2-outline"
      link="/preferences-demo"
    ></nb-menu-item>
    <nb-menu-item
      title="Design System"
      icon="color-palette-outline"
      link="/design-system"
    ></nb-menu-item>
    <nb-menu-item
      title="Accessibility Demo"
      icon="checkmark-circle-2-outline"
      link="/accessibility"
    ></nb-menu-item>
    <nb-menu-item
      title="Micro-interactions"
      icon="flash-outline"
      link="/micro-interactions"
    ></nb-menu-item>
    <nb-menu-item title="My Favorites" icon="heart-outline" link="/favorites"></nb-menu-item>
    <nb-menu-item
      *ngIf="isAdvertiser"
      title="Travel Plans"
      icon="map-outline"
      link="/touring"
    ></nb-menu-item>
    <nb-menu-item
      title="AI Profile Generator"
      icon="bulb-outline"
      link="/ai-dating-profile-generator"
    ></nb-menu-item>
    <nb-menu-item title="Video Chat" icon="video-outline" link="/video-chat"></nb-menu-item>
    <nb-menu-item
      *ngIf="isClient"
      title="Client Dashboard"
      icon="activity-outline"
      link="/client-dashboard"
    ></nb-menu-item>
    <nb-menu-item
      *ngIf="isAdvertiser"
      title="Escort Dashboard"
      icon="briefcase-outline"
      link="/escort-dashboard"
    ></nb-menu-item>
  </nb-menu>
</ng-template>

<!-- Notification Components -->
<app-notification [notifications]="notifications"></app-notification>
<app-alert-notifications></app-alert-notifications>
<app-debug-info></app-debug-info>
