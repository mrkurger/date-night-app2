<div class="main-layout">
  <!-- Left Sidebar Navigation -->
  <aside class="sidebar sidebar-left" [class.collapsed]="isMenuCollapsed">
    <div class="sidebar-header">
      <button class="toggle-button" (click)="toggleMenu()">
        <i class="fas" [class.fa-bars]="isMenuCollapsed" [class.fa-times]="!isMenuCollapsed"></i>
      </button>
      <div class="logo" *ngIf="!isMenuCollapsed">
        <a routerLink="/">DateNight.io</a>
      </div>
    </div>

    <div class="sidebar-content">
      <nav class="sidebar-nav">
        <ul class="nav-list">
          <li class="nav-item">
            <a class="nav-link" routerLink="/browse" [class.active]="activeView === 'netflix'">
              <i class="fas fa-th-large"></i>
              <span *ngIf="!isMenuCollapsed">Netflix View</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/swipe" [class.active]="activeView === 'tinder'">
              <i class="fas fa-heart"></i>
              <span *ngIf="!isMenuCollapsed">Tinder View</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/list" [class.active]="activeView === 'list'">
              <i class="fas fa-list"></i>
              <span *ngIf="!isMenuCollapsed">List View</span>
            </a>
          </li>
          <li class="nav-divider" *ngIf="!isMenuCollapsed"></li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/chat">
              <i class="fas fa-comment"></i>
              <span *ngIf="!isMenuCollapsed">Messages</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/favorites">
              <i class="fas fa-bookmark"></i>
              <span *ngIf="!isMenuCollapsed">Favorites</span>
            </a>
          </li>
          <li class="nav-divider" *ngIf="!isMenuCollapsed"></li>
          <li class="nav-item" *ngIf="isAuthenticated">
            <a class="nav-link" routerLink="/profile">
              <i class="fas fa-user"></i>
              <span *ngIf="!isMenuCollapsed">My Profile</span>
            </a>
          </li>
          <li class="nav-item" *ngIf="isAuthenticated">
            <a class="nav-link" routerLink="/settings">
              <i class="fas fa-cog"></i>
              <span *ngIf="!isMenuCollapsed">Settings</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/preferences-demo">
              <i class="fas fa-sliders-h"></i>
              <span *ngIf="!isMenuCollapsed">Preferences Demo</span>
            </a>
          </li>
          <li class="nav-item" *ngIf="isAuthenticated">
            <a class="nav-link" routerLink="/my-ads">
              <i class="fas fa-ad"></i>
              <span *ngIf="!isMenuCollapsed">My Ads</span>
            </a>
          </li>
          <li class="nav-item" *ngIf="isAuthenticated">
            <a class="nav-link" routerLink="/wallet">
              <i class="fas fa-wallet"></i>
              <span *ngIf="!isMenuCollapsed">My Wallet</span>
            </a>
          </li>
          <li class="nav-item" *ngIf="!isAuthenticated">
            <a class="nav-link" routerLink="/login">
              <i class="fas fa-sign-in-alt"></i>
              <span *ngIf="!isMenuCollapsed">Login</span>
            </a>
          </li>
          <li class="nav-item" *ngIf="!isAuthenticated">
            <a class="nav-link" routerLink="/register">
              <i class="fas fa-user-plus"></i>
              <span *ngIf="!isMenuCollapsed">Register</span>
            </a>
          </li>
        </ul>
      </nav>

      <div class="sidebar-footer" *ngIf="!isMenuCollapsed">
        <div class="theme-toggle-container">
          <app-theme-toggle
            mode="toggle"
            label="Dark Mode"
            labelPosition="left"
            ariaLabel="Toggle dark mode"
          ></app-theme-toggle>
        </div>
        <a class="upgrade-link" routerLink="/upgrade">
          <i class="fas fa-crown"></i> Upgrade to Premium
        </a>
      </div>

      <!-- Collapsed sidebar footer with just icons -->
      <div class="sidebar-footer sidebar-footer--collapsed" *ngIf="isMenuCollapsed">
        <app-theme-toggle mode="icon-only" ariaLabel="Toggle dark mode"></app-theme-toggle>
        <a
          class="upgrade-link upgrade-link--collapsed"
          routerLink="/upgrade"
          aria-label="Upgrade to Premium"
          title="Upgrade to Premium"
        >
          <i class="fas fa-crown"></i>
        </a>
      </div>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content">
    <ng-content></ng-content>
  </main>

  <!-- Right Sidebar for Premium Ads -->
  <aside class="sidebar sidebar-right">
    <div class="sidebar-header">
      <h3 class="premium-title">Premium Ads</h3>
    </div>

    <div class="sidebar-content">
      <!-- Loading State -->
      <div class="premium-loading" *ngIf="loading">
        <div class="spinner-border spinner-border-sm text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- Premium Ads List -->
      <div class="premium-ads" *ngIf="!loading">
        <div class="empty-premium" *ngIf="premiumAds.length === 0">
          <p>No premium ads available</p>
        </div>

        <div
          class="premium-ad"
          *ngFor="let ad of premiumAds"
          [routerLink]="['/ad-details', ad._id]"
        >
          <div class="premium-ad-media">
            <img [src]="getMediaUrl(ad)" [alt]="ad.title" class="premium-ad-image" />
            <div class="premium-badge">
              <i class="fas fa-crown"></i>
            </div>
          </div>
          <div class="premium-ad-info">
            <h4 class="premium-ad-title">{{ ad.title }}</h4>
            <p class="premium-ad-location" *ngIf="ad.location">
              <i class="fas fa-map-marker-alt"></i> {{ ad.location }}
            </p>
          </div>
        </div>
      </div>

      <!-- Become Premium CTA -->
      <div class="premium-cta">
        <p>Want to be featured here?</p>
        <a routerLink="/upgrade" class="btn btn-premium">
          <i class="fas fa-crown"></i> Become Premium
        </a>
      </div>
    </div>
  </aside>
</div>
