<!-- Emerald PageHeader Component -->
<!-- Documentation: https://docs-emerald.condorlabs.io/PageHeader -->

<div
  class="nb-header"
  [ngClass]="{ 'nb-header--with-background': backgroundImage }"
>
  <!-- Background Image -->
  <div
    *ngIf="backgroundImage"
    class="nb-header__background"
    [style.background-image]="'url(' + backgroundImage + ')'"
  >
    <div class="nb-header__overlay"></div>
  </div>

  <div class="nb-header__container">
    <!-- Back Link -->
    <a *ngIf="backLink" [routerLink]="backLink" class="nb-header__back-link">
      <i class="fas fa-arrow-left"></i>
      <span>Back</span>
    </a>

    <!-- Breadcrumbs -->
    <div *ngIf="breadcrumbs && breadcrumbs.length > 0" class="nb-header__breadcrumbs">
      <ul class="nb-header__breadcrumbs-list">
        <li
          *ngFor="let crumb of breadcrumbs; let last = last"
          class="nb-header__breadcrumb"
          [ngClass]="{ 'nb-header__breadcrumb--active': last }"
        >
          <a
            *ngIf="!last && crumb.url"
            [routerLink]="crumb.url"
            class="nb-header__breadcrumb-link"
          >
            {{ crumb.label }}
          </a>
          <span *ngIf="last || !crumb.url">{{ crumb.label }}</span>
          <i
            *ngIf="!last"
            class="fas fa-chevron-right nb-header__breadcrumb-separator"
          ></i>
        </li>
      </ul>
    </div>

    <div class="nb-header__content">
      <!-- Avatar (if provided) -->
      <div *ngIf="avatarUrl || avatarName" class="nb-header__avatar-container">
        <div class="nb-header__avatar">
          <img
            *ngIf="avatarUrl"
            [src]="avatarUrl"
            [alt]="avatarName || 'User avatar'"
            class="nb-header__avatar-image"
          />

          <span *ngIf="!avatarUrl && avatarName" class="nb-header__avatar-initials">
            {{ avatarName.charAt(0).toUpperCase() }}
          </span>

          <span
            *ngIf="avatarIsOnline !== undefined"
            class="nb-header__avatar-status"
            [ngClass]="{
              'nb-header__avatar-status--online': avatarIsOnline,
              'nb-header__avatar-status--offline': !avatarIsOnline,
            }"
          >
          </span>
        </div>
      </div>

      <!-- Title and Subtitle -->
      <div class="nb-header__titles">
        <h1 class="nb-header__title">{{ title }}</h1>
        <p *ngIf="subtitle" class="nb-header__subtitle">{{ subtitle }}</p>
      </div>

      <!-- Actions -->
      <div *ngIf="actions && actions.length > 0" class="nb-header__actions">
        <button
          *ngFor="let action of actions"
          class="nb-header__action"
          [ngClass]="{
            'nb-header__action--primary': action.variant === 'primary',
            'nb-header__action--secondary': action.variant === 'secondary',
            'nb-header__action--success': action.variant === 'success',
            'nb-header__action--danger': action.variant === 'danger',
            'nb-header__action--warning': action.variant === 'warning',
            'nb-header__action--info': action.variant === 'info',
          }"
          (click)="onActionClick(action, $event)"
        >
          <i *ngIf="action.icon" class="{{ action.icon }} nb-header__action-icon"></i>
          <span class="nb-header__action-label">{{ action.label }}</span>
        </button>
      </div>
    </div>
  </div>
</div>
