<!-- Emerald AppCard Component -->
<!-- Documentation: https://docs-emerald.condorlabs.io/AppCard -->

<div class="emerald-app-card" 
     [ngClass]="{'emerald-app-card--tinder': layout === 'tinder', 
                'emerald-app-card--netflix': layout === 'netflix',
                'emerald-app-card--list': layout === 'list'}"
     (click)="onViewDetails()">
  
  <!-- Card Background Image -->
  <div class="emerald-app-card__media" [style.background-image]="'url(' + backgroundImageUrl + ')'">
    <!-- Online/Offline Status Label -->
    <div class="emerald-app-card__status-label" [ngClass]="{'emerald-app-card__status-label--online': isOnline, 'emerald-app-card__status-label--offline': !isOnline}">
      <span class="emerald-app-card__status-indicator"></span>
      <span class="emerald-app-card__status-text">{{ isOnline ? 'Online' : 'Offline' }}</span>
    </div>
    
    <!-- Media Navigation Dots -->
    <div class="emerald-app-card__media-dots" *ngIf="getMediaCount() > 1">
      <div *ngFor="let dot of getMediaDots(); let i = index" 
           class="emerald-app-card__media-dot" 
           [ngClass]="{'emerald-app-card__media-dot--active': i === currentMediaIndex}"
           (click)="$event.stopPropagation(); currentMediaIndex = i; backgroundImageUrl = getCurrentMediaUrl()">
      </div>
    </div>
    
    <!-- Media Navigation Buttons -->
    <button *ngIf="getMediaCount() > 1" 
            class="emerald-app-card__media-nav emerald-app-card__media-nav--prev" 
            (click)="prevMedia($event)" 
            aria-label="Previous image">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button *ngIf="getMediaCount() > 1" 
            class="emerald-app-card__media-nav emerald-app-card__media-nav--next" 
            (click)="nextMedia($event)" 
            aria-label="Next image">
      <i class="fas fa-chevron-right"></i>
    </button>
    
    <!-- Content Overlay with Blur Effect -->
    <div class="emerald-app-card__content-overlay">
      <div class="emerald-app-card__content">
        <h3 class="emerald-app-card__title">{{ ad.title }}</h3>
        
        <div class="emerald-app-card__meta">
          <div class="emerald-app-card__location" *ngIf="ad.location">
            <i class="fas fa-map-marker-alt"></i>
            <span>{{ ad.location }}</span>
          </div>
          
          <div class="emerald-app-card__price" *ngIf="ad.price">
            <i class="fas fa-tag"></i>
            <span>{{ formatPrice(ad.price) }}</span>
          </div>
        </div>
        
        <p class="emerald-app-card__description" *ngIf="showDescription && ad.description">
          {{ getTruncatedDescription() }}
        </p>
      </div>
    </div>
  </div>
  
  <!-- Card Actions -->
  <div class="emerald-app-card__actions" *ngIf="showActions">
    <!-- Bottom Left Floating Action Button -->
    <button class="emerald-app-card__fab emerald-app-card__fab--left" 
            (click)="onLike($event)" 
            aria-label="Like">
      <i class="fas fa-heart"></i>
    </button>
    
    <!-- Bottom Right Floating Action Button -->
    <button class="emerald-app-card__fab emerald-app-card__fab--right" 
            (click)="onChat($event)" 
            aria-label="Chat">
      <i class="fas fa-comment"></i>
    </button>
    
    <!-- Tinder-specific Swipe Actions -->
    <div class="emerald-app-card__swipe-actions" *ngIf="layout === 'tinder'">
      <button class="emerald-app-card__swipe-button emerald-app-card__swipe-button--left" 
              (click)="onSwipe('left', $event)" 
              aria-label="Swipe left">
        <i class="fas fa-times"></i>
      </button>
      <button class="emerald-app-card__swipe-button emerald-app-card__swipe-button--right" 
              (click)="onSwipe('right', $event)" 
              aria-label="Swipe right">
        <i class="fas fa-heart"></i>
      </button>
    </div>
  </div>
</div>