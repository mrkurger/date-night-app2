<!-- Emerald Pager Component -->
<!-- Documentation: https://docs-emerald.condorlabs.io/Pager -->

<div
  class="nb-paginator"
  [ngClass]="{
    'nb-paginator--simple': style === 'simple',
    'nb-paginator--compact': style === 'compact',
    'nb-paginator--small': size === 'small',
    'nb-paginator--large': size === 'large',
    'nb-paginator--left': align === 'left',
    'nb-paginator--right': align === 'right',
  }"
>
  <!-- Page Size Selector -->
  <div class="nb-paginator__size-selector" *ngIf="showPageSize">
    <label for="pageSize">Items per page:</label>
    <p-dropdown
      id="pageSize"
      [selected]="pageSize"
      (selectedChange)="onPageSizeChange($event)"
      [size]="size"
     [options]="options" optionLabel="label" optionValue="value">
      <!-- TODO: Convert to options array: 
        {{ size }}
       -->
    </p-dropdown>
  </div>

  <!-- Pagination Controls -->
  <div class="nb-paginator__controls">
    <!-- Simple Style -->
    <div *ngIf="style === 'simple'" class="nb-paginator__simple">
      <button
        nbButton
        ghost
        [disabled]="currentPage === 1"
        (click)="goToPage(currentPage - 1)"
        aria-label="Previous page"
      >
        <i class="pi pi-chevron-left"></i>
      </button>
      <span class="nb-paginator__current">{{ currentPage }} / {{ totalPages }}</span>
      <button
        nbButton
        ghost
        [disabled]="currentPage === totalPages"
        (click)="goToPage(currentPage + 1)"
        aria-label="Next page"
      >
        <i class="pi pi-chevron-right"></i>
      </button>
    </div>

    <!-- Default and Compact Styles -->
    <div *ngIf="style !== 'simple'" class="nb-paginator__pages">
      <!-- First Page Button -->
      <button
        *ngIf="showFirstLast"
        nbButton
        ghost
        [disabled]="currentPage === 1"
        (click)="goToPage(1)"
        aria-label="First page"
        [size]="size"
      >
        <i class="pi pi-chevrons-left"></i>
      </button>

      <!-- Previous Page Button -->
      <button
        *ngIf="showPrevNext"
        nbButton
        ghost
        [disabled]="currentPage === 1"
        (click)="goToPage(currentPage - 1)"
        aria-label="Previous page"
        [size]="size"
      >
        <i class="pi pi-chevron-left"></i>
      </button>

      <!-- Page Numbers -->
      <button
        *ngFor="let page of visiblePages"
        nbButton
        [ghost]="page !== currentPage"
        [status]="page === currentPage ? 'primary' : 'basic'"
        (click)="goToPage(page)"
        [size]="size"
      >
        {{ page }}
      </button>

      <!-- Next Page Button -->
      <button
        *ngIf="showPrevNext"
        nbButton
        ghost
        [disabled]="currentPage === totalPages"
        (click)="goToPage(currentPage + 1)"
        aria-label="Next page"
        [size]="size"
      >
        <i class="pi pi-chevron-right"></i>
      </button>

      <!-- Last Page Button -->
      <button
        *ngIf="showFirstLast"
        nbButton
        ghost
        [disabled]="currentPage === totalPages"
        (click)="goToPage(totalPages)"
        aria-label="Last page"
        [size]="size"
      >
        <i class="pi pi-chevrons-right"></i>
      </button>
    </div>
  </div>
</div>
