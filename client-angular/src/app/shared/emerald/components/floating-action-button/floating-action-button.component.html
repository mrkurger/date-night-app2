<!-- Floating Action Button Component -->
<!-- Using Nebular styling -->

<div
  class="nb-fab-container"
  [ngClass]="{
    'nb-fab-container--bottom-right': position === 'bottom-right',
    'nb-fab-container--bottom-left': position === 'bottom-left',
    'nb-fab-container--top-right': position === 'top-right',
    'nb-fab-container--top-left': position === 'top-left',
    'nb-fab-container--center': position === 'center',
  }"
>
  <!-- Main Floating Action Button -->
  <button
    class="nb-fab"
    [ngClass]="{
      'nb-fab--primary': color === 'primary',
      'nb-fab--secondary': color === 'secondary',
      'nb-fab--success': color === 'success',
      'nb-fab--danger': color === 'danger',
      'nb-fab--warning': color === 'warning',
      'nb-fab--info': color === 'info',
      'nb-fab--small': size === 'small',
      'nb-fab--medium': size === 'medium',
      'nb-fab--large': size === 'large',
      'nb-fab--open': menuOpen,
    }"
    [disabled]="disabled"
    (click)="toggleMenu($event)"
    [attr.aria-label]="label"
    nbButton
    [status]="color"
    shape="round"
  >
    <nb-icon [icon]="icon" pack="fas"></nb-icon>

    <!-- Tooltip -->
    <span *ngIf="showTooltip && tooltipText" class="nb-fab__tooltip" nbTooltip="{{ tooltipText }}">
    </span>
  </button>

  <!-- Menu Items -->
  <div
    *ngIf="hasMenu"
    class="nb-fab-menu"
    [ngClass]="{
      'nb-fab-menu--bottom-right': position === 'bottom-right',
      'nb-fab-menu--bottom-left': position === 'bottom-left',
      'nb-fab-menu--top-right': position === 'top-right',
      'nb-fab-menu--top-left': position === 'top-left',
      'nb-fab-menu--center': position === 'center',
      'nb-fab-menu--open': menuOpen,
    }"
  >
    <button
      *ngFor="let item of menuItems"
      class="nb-fab-menu__item"
      [ngClass]="{
        'nb-fab-menu__item--primary': color === 'primary',
        'nb-fab-menu__item--secondary': color === 'secondary',
        'nb-fab-menu__item--success': color === 'success',
        'nb-fab-menu__item--danger': color === 'danger',
        'nb-fab-menu__item--warning': color === 'warning',
        'nb-fab-menu__item--info': color === 'info',
      }"
      (click)="onMenuItemClick(item, $event)"
      [attr.aria-label]="item.label"
      nbButton
      [status]="color"
      ghost
    >
      <nb-icon [icon]="item.icon" pack="fas"></nb-icon>
      <span class="nb-fab-menu__item-label">{{ item.label }}</span>
    </button>
  </div>

  <!-- Backdrop for closing menu when clicking outside -->
  <div *ngIf="menuOpen" class="nb-fab-backdrop" (click)="closeMenu()"></div>
</div>
