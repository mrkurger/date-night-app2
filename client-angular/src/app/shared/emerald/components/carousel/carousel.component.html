<!-- Carousel Component using Nebular UI -->

<div
  class="nb-carousel"
  [ngClass]="{
    'nb-carousel-1-1': aspectRatio === '1:1',
    'nb-carousel-4-3': aspectRatio === '4:3',
    'nb-carousel-16-9': aspectRatio === '16:9',
    'nb-carousel-21-9': aspectRatio === '21:9',
    'nb-carousel-with-thumbnails': thumbnails,
  }"
>
  <!-- Main Carousel -->
  <div class="nb-carousel-main">
    <!-- Carousel Items -->
    <div class="nb-carousel-items">
      <div
        *ngFor="let item of items; let i = index"
        class="nb-carousel-item"
        [ngClass]="{ 'nb-carousel-item-active': i === currentIndex }"
      >
        <!-- Image Item -->
        <img
          *ngIf="item.type === 'image'"
          [src]="item.url"
          [alt]="item.alt || 'Carousel image'"
          class="nb-carousel-image"
          (error)="onImageError($event)"
        />

        <!-- Video Item -->
        <video *ngIf="item.type === 'video'" class="nb-carousel-video" controls>
          <source [src]="item.url" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </div>
    </div>

    <!-- Navigation Arrows -->
    <div *ngIf="showArrows && items.length > 1" class="nb-carousel-arrows">
      <button
        nbButton
        ghost
        size="medium"
        class="nb-carousel-arrow nb-carousel-arrow-prev"
        (click)="prev($event)"
        aria-label="Previous slide"
      >
        <i class="pi pi-arrow-left"></i>
      </button>
      <button
        nbButton
        ghost
        size="medium"
        class="nb-carousel-arrow nb-carousel-arrow-next"
        (click)="next($event)"
        aria-label="Next slide"
      >
        <i class="pi pi-arrow-right"></i>
      </button>
    </div>

    <!-- Navigation Dots -->
    <div *ngIf="showDots && items.length > 1 && !thumbnails" class="nb-carousel-dots">
      <button
        *ngFor="let item of items; let i = index"
        class="nb-carousel-dot"
        [ngClass]="{ 'nb-carousel-dot-active': i === currentIndex }"
        (click)="goTo(i, $event)"
        [attr.aria-label]="'Go to slide ' + (i + 1)"
      ></button>
    </div>
  </div>

  <!-- Thumbnails -->
  <div *ngIf="thumbnails && items.length > 1" class="nb-carousel-thumbnails">
    <div class="nb-carousel-thumbnails-container">
      <button
        *ngFor="let item of items; let i = index"
        class="nb-carousel-thumbnail"
        [ngClass]="{ 'nb-carousel-thumbnail-active': i === currentIndex }"
        (click)="goTo(i, $event)"
        [attr.aria-label]="'Go to slide ' + (i + 1)"
      >
        <img
          [src]="item.thumbnail || item.url"
          [alt]="'Thumbnail ' + (i + 1)"
          class="nb-carousel-thumbnail-image"
          (error)="onImageError($event)"
        />
      </button>
    </div>
  </div>
</div>
