<!-- Emerald Carousel Component -->
<!-- Documentation: https://docs-emerald.condorlabs.io/Carousel -->

<div class="emerald-carousel" 
     [ngClass]="{'emerald-carousel--1-1': aspectRatio === '1:1',
                'emerald-carousel--4-3': aspectRatio === '4:3',
                'emerald-carousel--16-9': aspectRatio === '16:9',
                'emerald-carousel--21-9': aspectRatio === '21:9',
                'emerald-carousel--with-thumbnails': thumbnails}">
  
  <!-- Main Carousel -->
  <div class="emerald-carousel__main">
    <!-- Carousel Items -->
    <div class="emerald-carousel__items">
      <div *ngFor="let item of items; let i = index" 
           class="emerald-carousel__item" 
           [ngClass]="{'emerald-carousel__item--active': i === currentIndex}">
        
        <!-- Image Item -->
        <img *ngIf="item.type === 'image'" 
             [src]="item.url" 
             [alt]="item.alt || 'Carousel image'" 
             class="emerald-carousel__image"
             (error)="onImageError($event)">
        
        <!-- Video Item -->
        <video *ngIf="item.type === 'video'" 
               class="emerald-carousel__video" 
               controls>
          <source [src]="item.url" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>
    
    <!-- Navigation Arrows -->
    <div *ngIf="showArrows && items.length > 1" class="emerald-carousel__arrows">
      <button class="emerald-carousel__arrow emerald-carousel__arrow--prev" 
              (click)="prev($event)" 
              aria-label="Previous slide">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="emerald-carousel__arrow emerald-carousel__arrow--next" 
              (click)="next($event)" 
              aria-label="Next slide">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
    
    <!-- Navigation Dots -->
    <div *ngIf="showDots && items.length > 1 && !thumbnails" class="emerald-carousel__dots">
      <button *ngFor="let item of items; let i = index" 
              class="emerald-carousel__dot" 
              [ngClass]="{'emerald-carousel__dot--active': i === currentIndex}"
              (click)="goTo(i, $event)" 
              [attr.aria-label]="'Go to slide ' + (i + 1)">
      </button>
    </div>
  </div>
  
  <!-- Thumbnails -->
  <div *ngIf="thumbnails && items.length > 1" class="emerald-carousel__thumbnails">
    <div class="emerald-carousel__thumbnails-container">
      <button *ngFor="let item of items; let i = index" 
              class="emerald-carousel__thumbnail" 
              [ngClass]="{'emerald-carousel__thumbnail--active': i === currentIndex}"
              (click)="goTo(i, $event)" 
              [attr.aria-label]="'Go to slide ' + (i + 1)">
        <img [src]="item.thumbnail || item.url" 
             [alt]="'Thumbnail ' + (i + 1)" 
             class="emerald-carousel__thumbnail-image"
             (error)="onImageError($event)">
      </button>
    </div>
  </div>
</div>