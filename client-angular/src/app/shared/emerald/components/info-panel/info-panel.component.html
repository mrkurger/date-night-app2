<!-- InfoPanel Component -->
<!-- Using Nebular components -->

<p-card
  [ngClass]="{
    'nb-card-bordered': variant === 'bordered',
    'nb-card-shadowed': variant === 'shadowed',
  }"
>
  <!-- For non-collapsible panels -->
  <ng-container *ngIf="!collapsible">
    <ng-template pTemplate="header">
      <div class="nb-info-panel__title-container">
        <h3 class="nb-info-panel__title">{{ title }}</h3>
        <p *ngIf="subtitle" class="nb-info-panel__subtitle">{{ subtitle }}</p>
      </div>
    </ng-template>

    <ng-template pTemplate="content">
      <div class="nb-info-panel__items">
        <div *ngFor="let item of items" class="nb-info-panel__item">
          <!-- Item Label -->
          <div class="nb-info-panel__item-label">
            <i *ngIf="item.icon" [class]="getIconClass(item.icon)"></i>
            <span>{{ item.label }}</span>
          </div>

          <!-- Item Value -->
          <div class="nb-info-panel__item-value">
            <!-- Text Value -->
            <span *ngIf="!item.type || item.type === 'text'">{{ item.value }}</span>

            <!-- Badge Value -->
            <p-badge
              *ngIf="item.type === 'badge'"
              [value]="item.value.toString()"
              [severity]="getBadgeSeverity(item.variant)"
            ></p-badge>

            <!-- Progress Value -->
            <div *ngIf="item.type === 'progress'" class="nb-info-panel__progress">
              <p-progressBar [value]="item.value as number" [showValue]="true"></p-progressBar>
            </div>

            <!-- Boolean Value -->
            <span *ngIf="item.type === 'boolean'" class="nb-info-panel__boolean">
              <i
                [class]="item.value ? 'pi pi-check text-green-500' : 'pi pi-times text-red-500'"
              ></i>
            </span>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <!-- For collapsible panels -->
  <p-accordion *ngIf="collapsible">
    <p-accordionTab [expanded]="!initiallyCollapsed">
      <ng-template pTemplate="header">
        <div class="nb-info-panel__title-container">
          <h3 class="nb-info-panel__title">{{ title }}</h3>
          <p *ngIf="subtitle" class="nb-info-panel__subtitle">{{ subtitle }}</p>
        </div>
      </ng-template>
      <ng-template pTemplate="content">
        <div class="nb-info-panel__items">
          <div *ngFor="let item of items" class="nb-info-panel__item">
            <!-- Item Label -->
            <div class="nb-info-panel__item-label">
              <i *ngIf="item.icon" [class]="getIconClass(item.icon)"></i>
              <span>{{ item.label }}</span>
            </div>

            <!-- Item Value -->
            <div class="nb-info-panel__item-value">
              <!-- Text Value -->
              <span *ngIf="!item.type || item.type === 'text'">{{ item.value }}</span>

              <!-- Badge Value -->
              <p-badge
                *ngIf="item.type === 'badge'"
                [text]="item.value.toString()"
                [status]="item.variant || 'basic'"
                position="centered"
                value=""
              ></p-badge>

              <!-- Progress Value -->
              <div *ngIf="item.type === 'progress'" class="nb-info-panel__progress">
                <p-progressBar
                  [value]="item.value as number"
                  [status]="item.variant || 'basic'"
                  [displayValue]="true"
                ></p-progressBar>
              </div>

              <!-- Boolean Value -->
              <span *ngIf="item.type === 'boolean'" class="nb-info-panel__boolean">
                <i
                  [class]="item.value ? 'pi pi-check text-green-500' : 'pi pi-times text-red-500'"
                ></i>
              </span>
            </div>
          </div>
        </div>
      </ng-template>
    </p-accordionTab>
  </p-accordion>
</p-card>
