<!-- InfoPanel Component -->
<!-- Using Nebular components -->

<nb-card
  [ngClass]="{
    'nb-card-bordered': variant === 'bordered',
    'nb-card-shadowed': variant === 'shadowed',
  }"
>
  <!-- For non-collapsible panels -->
  <ng-container *ngIf="!collapsible">
    <nb-card-header>
      <div class="nb-info-panel__title-container">
        <h3 class="nb-info-panel__title">{{ title }}</h3>
        <p *ngIf="subtitle" class="nb-info-panel__subtitle">{{ subtitle }}</p>
      </div>
    </nb-card-header>

    <nb-card-body>
      <div class="nb-info-panel__items">
        <div *ngFor="let item of items" class="nb-info-panel__item">
          <!-- Item Label -->
          <div class="nb-info-panel__item-label">
            <nb-icon *ngIf="item.icon" [icon]="getIconName(item.icon)" pack="eva"></nb-icon>
            <span>{{ item.label }}</span>
          </div>

          <!-- Item Value -->
          <div class="nb-info-panel__item-value">
            <!-- Text Value -->
            <span *ngIf="!item.type || item.type === 'text'">{{ item.value }}</span>

            <!-- Badge Value -->
            <nb-badge
              *ngIf="item.type === 'badge'"
              [text]="item.value.toString()"
              [status]="item.variant || 'basic'"
              position="centered"
            ></nb-badge>

            <!-- Progress Value -->
            <div *ngIf="item.type === 'progress'" class="nb-info-panel__progress">
              <nb-progress-bar
                [value]="item.value as number"
                [status]="item.variant || 'basic'"
                [displayValue]="true"
              ></nb-progress-bar>
            </div>

            <!-- Boolean Value -->
            <span *ngIf="item.type === 'boolean'" class="nb-info-panel__boolean">
              <nb-icon
                [icon]="item.value ? 'checkmark-outline' : 'close-outline'"
                [status]="item.value ? 'success' : 'danger'"
                pack="eva"
              ></nb-icon>
            </span>
          </div>
        </div>
      </div>
    </nb-card-body>
  </ng-container>

  <!-- For collapsible panels -->
  <nb-accordion *ngIf="collapsible">
    <nb-accordion-item [expanded]="!initiallyCollapsed">
      <nb-accordion-item-header>
        <div class="nb-info-panel__title-container">
          <h3 class="nb-info-panel__title">{{ title }}</h3>
          <p *ngIf="subtitle" class="nb-info-panel__subtitle">{{ subtitle }}</p>
        </div>
      </nb-accordion-item-header>
      <nb-accordion-item-body>
        <div class="nb-info-panel__items">
          <div *ngFor="let item of items" class="nb-info-panel__item">
            <!-- Item Label -->
            <div class="nb-info-panel__item-label">
              <nb-icon *ngIf="item.icon" [icon]="getIconName(item.icon)" pack="eva"></nb-icon>
              <span>{{ item.label }}</span>
            </div>

            <!-- Item Value -->
            <div class="nb-info-panel__item-value">
              <!-- Text Value -->
              <span *ngIf="!item.type || item.type === 'text'">{{ item.value }}</span>

              <!-- Badge Value -->
              <nb-badge
                *ngIf="item.type === 'badge'"
                [text]="item.value.toString()"
                [status]="item.variant || 'basic'"
                position="centered"
              ></nb-badge>

              <!-- Progress Value -->
              <div *ngIf="item.type === 'progress'" class="nb-info-panel__progress">
                <nb-progress-bar
                  [value]="item.value as number"
                  [status]="item.variant || 'basic'"
                  [displayValue]="true"
                ></nb-progress-bar>
              </div>

              <!-- Boolean Value -->
              <span *ngIf="item.type === 'boolean'" class="nb-info-panel__boolean">
                <nb-icon
                  [icon]="item.value ? 'checkmark-outline' : 'close-outline'"
                  [status]="item.value ? 'success' : 'danger'"
                  pack="eva"
                ></nb-icon>
              </span>
            </div>
          </div>
        </div>
      </nb-accordion-item-body>
    </nb-accordion-item>
  </nb-accordion>
</nb-card>
